{"version":3,"sources":["webpack:///./src/pages/applications/liberty/liberty-build.mdx"],"names":["Title","_frontmatter","makeShortcode","name","props","console","warn","PageDescription","AnchorLinks","AnchorLink","layoutProps","MDXLayout","DefaultLayout","MDXContent","components","mdxType","parentName","small","isMDXComponent"],"mappings":"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","file":"component---src-pages-applications-liberty-liberty-build-mdx-ccd33ac97ac813233b8a.js","sourcesContent":["import * as React from 'react'\n  /* @jsx mdx */\nimport { mdx } from '@mdx-js/react';\n/* @jsxRuntime classic */\n\n/* @jsx mdx */\n\nimport DefaultLayout from \"/home/runner/work/modernization-playbook/modernization-playbook/node_modules/gatsby-theme-carbon/src/templates/Default.js\";\nexport const Title = () => <span>\nModernizing runtimes with Liberty <br /> <h2>Build modernized application</h2>\n  </span>;\nexport const _frontmatter = {};\n\nconst makeShortcode = name => function MDXDefaultShortcode(props) {\n  console.warn(\"Component \" + name + \" was not imported, exported, or provided by MDXProvider as global scope\");\n  return <div {...props} />;\n};\n\nconst PageDescription = makeShortcode(\"PageDescription\");\nconst AnchorLinks = makeShortcode(\"AnchorLinks\");\nconst AnchorLink = makeShortcode(\"AnchorLink\");\nconst layoutProps = {\n  Title,\n  _frontmatter\n};\nconst MDXLayout = DefaultLayout;\nexport default function MDXContent({\n  components,\n  ...props\n}) {\n  return <MDXLayout {...layoutProps} {...props} components={components} mdxType=\"MDXLayout\">\n\n\n\n    <PageDescription mdxType=\"PageDescription\">\nThis section covers how to make the minimal code changes required to allow the application to run on the Liberty runtime and how to create the configuration required for the Liberty runtime. The Liberty runtime and Docker image configuration will take in to account factors such as the requirement to inject environment specific configuration (such as JDBC Datasource User IDs and Passwords) at runtime and how to integrate with the Logging and Monitoring framework of the Cloud platform.\n    </PageDescription>\n    <p>{`The final versions of the files created in this section can be found in `}<a parentName=\"p\" {...{\n        \"href\": \"https://github.com/ibm-cloud-architecture/appmod-liberty-tekton\"\n      }}>{`this repo`}</a></p>\n    <h2>{`Summary`}</h2>\n    <p>{`This section has the following steps:`}</p>\n    <AnchorLinks small mdxType=\"AnchorLinks\">\n  <AnchorLink mdxType=\"AnchorLink\">Overview</AnchorLink>\n  <AnchorLink mdxType=\"AnchorLink\">Code changes</AnchorLink>\n  <AnchorLink mdxType=\"AnchorLink\">Create the WebSphere Liberty server.xml file</AnchorLink>\n  <AnchorLink mdxType=\"AnchorLink\">Handling environment specific configuration</AnchorLink>\n  <AnchorLink mdxType=\"AnchorLink\">Monitoring</AnchorLink>\n  <AnchorLink mdxType=\"AnchorLink\">Project structure</AnchorLink>\n  <AnchorLink mdxType=\"AnchorLink\">Create the Docker Dockerfile</AnchorLink>\n  <AnchorLink mdxType=\"AnchorLink\">Run the application locally</AnchorLink>\n    </AnchorLinks>\n    <h2>{`Overview`}</h2>\n    <p>{`This section covers the following steps that are required to build and run the CustomerOrderServices application locally in a Docker container.`}</p>\n    <ol>\n      <li parentName=\"ol\">\n        <p parentName=\"li\">{`Make minimal code changes to the application based on the analysis from IBM Cloud Transformation Advisor`}</p>\n      </li>\n      <li parentName=\"ol\">\n        <p parentName=\"li\">{`Create the WebSphere Liberty configuration file `}<inlineCode parentName=\"p\">{`server.xml`}</inlineCode>{` for the Customer Order Services application. This includes:`}</p>\n        <ul parentName=\"li\">\n          <li parentName=\"ul\">{`listing the WebSphere Liberty runtime features that are required`}</li>\n          <li parentName=\"ul\">{`configuring a DB2 Data Source`}</li>\n          <li parentName=\"ul\">{`configuring a local user registry`}</li>\n          <li parentName=\"ul\">{`using environment variables in the `}<inlineCode parentName=\"li\">{`server.xml`}</inlineCode>{` file to allow configuration to be injected in to the runtime environment dynamically such as the DB2 user and password.`}</li>\n        </ul>\n      </li>\n      <li parentName=\"ol\">\n        <p parentName=\"li\">{`Configuring WebSphere Liberty to expose internal metrics in a way that they can be collected by Prometheus`}</p>\n      </li>\n      <li parentName=\"ol\">\n        <p parentName=\"li\">{`Creating a `}<inlineCode parentName=\"p\">{`Dockerfile`}</inlineCode>{` and running the application in a Docker container locally`}</p>\n      </li>\n    </ol>\n    <h2>{`Code changes`}</h2>\n    <p>{`In the previous section IBM Cloud Transformation Advisor highlighted a change in the way that Enterprise JavaBeans are looked up in Liberty.`}</p>\n    <p><strong parentName=\"p\">{`Behavior change on lookups for Enterprise JavaBeans`}</strong>{` In Liberty, EJB components are not bound to a server root Java Naming and Directory Interface (JNDI) namespace as they are in WebSphere Application Server traditional. The fix for this is to change the three classes that use `}<inlineCode parentName=\"p\">{`ejblocal`}</inlineCode>{` to use the correct URL for Liberty`}</p>\n    <p>{`The three Java classes that should be modified to look up Enterprise JavaBeans differently are shown in the detailed analysis view of IBM Cloud Transformation Advisor (it isn’t necessary to change the `}<inlineCode parentName=\"p\">{`ibm-web-bnd.xml`}</inlineCode>{` file in the `}<inlineCode parentName=\"p\">{`Test`}</inlineCode>{` project in this scenario) to be in the `}<inlineCode parentName=\"p\">{`CustomerOrderServicesWeb`}</inlineCode>{` project`}</p>\n    <p>{`  `}<span parentName=\"p\" {...{\n        \"className\": \"gatsby-resp-image-wrapper\",\n        \"style\": {\n          \"position\": \"relative\",\n          \"display\": \"block\",\n          \"marginLeft\": \"auto\",\n          \"marginRight\": \"auto\",\n          \"maxWidth\": \"945px\"\n        }\n      }}>{`\n      `}<span parentName=\"span\" {...{\n          \"className\": \"gatsby-resp-image-background-image\",\n          \"style\": {\n            \"paddingBottom\": \"34.72222222222222%\",\n            \"position\": \"relative\",\n            \"bottom\": \"0\",\n            \"left\": \"0\",\n            \"backgroundImage\": \"url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAHABQDASIAAhEBAxEB/8QAFgABAQEAAAAAAAAAAAAAAAAAAAEF/8QAFAEBAAAAAAAAAAAAAAAAAAAAAP/aAAwDAQACEAMQAAAB3KFB/8QAFBABAAAAAAAAAAAAAAAAAAAAEP/aAAgBAQABBQJ//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPwE//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPwE//8QAFBABAAAAAAAAAAAAAAAAAAAAEP/aAAgBAQAGPwJ//8QAGBAAAgMAAAAAAAAAAAAAAAAAAAEQESH/2gAIAQEAAT8hRtKP/9oADAMBAAIAAwAAABBwD//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8QP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8QP//EABsQAQACAgMAAAAAAAAAAAAAAAEAESExQVHw/9oACAEBAAE/EA6oo91FGTmUpc//2Q==')\",\n            \"backgroundSize\": \"cover\",\n            \"display\": \"block\"\n          }\n        }}></span>{`\n  `}<img parentName=\"span\" {...{\n          \"className\": \"gatsby-resp-image-image\",\n          \"alt\": \"Analysis\",\n          \"title\": \"Analysis\",\n          \"src\": \"/modernization-playbook/static/25e21de60ad39b576e7784709d67ea52/8095a/analysis.jpg\",\n          \"srcSet\": [\"/modernization-playbook/static/25e21de60ad39b576e7784709d67ea52/69549/analysis.jpg 288w\", \"/modernization-playbook/static/25e21de60ad39b576e7784709d67ea52/473e3/analysis.jpg 576w\", \"/modernization-playbook/static/25e21de60ad39b576e7784709d67ea52/8095a/analysis.jpg 945w\"],\n          \"sizes\": \"(max-width: 945px) 100vw, 945px\",\n          \"style\": {\n            \"width\": \"100%\",\n            \"height\": \"100%\",\n            \"margin\": \"0\",\n            \"verticalAlign\": \"middle\",\n            \"position\": \"absolute\",\n            \"top\": \"0\",\n            \"left\": \"0\"\n          },\n          \"loading\": \"lazy\"\n        }}></img>{`\n    `}</span></p>\n    <p>{`  `}<inlineCode parentName=\"p\">{`org.pwte.example.resources.CategoryResource.java`}</inlineCode>{` is changed from using `}<inlineCode parentName=\"p\">{`ejblocal`}</inlineCode>{` on line 28 as shown below:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-java\"\n      }}>{`...\nInitialContext().lookup(\"ejblocal:org.pwte.example.service.ProductSearchService\");\n...\n`}</code></pre>\n    <p>{`  to use `}<inlineCode parentName=\"p\">{`java:app`}</inlineCode>{` as shown below:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-java\"\n      }}>{`...\nInitialContext().lookup(\"java:app/CustomerOrderServices/ProductSearchServiceImpl!org.pwte.example.service.ProductSearchService\");\n...\n`}</code></pre>\n    <p>{`  line 53 of `}<inlineCode parentName=\"p\">{`org.pwte.example.resources.CustomerOrderResource.java`}</inlineCode>{` is changed as shown below:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-java\"\n      }}>{`...\nctx.lookup(\"java:app/CustomerOrderServices/CustomerOrderServicesImpl!org.pwte.example.service.CustomerOrderServices\");\n...\n`}</code></pre>\n    <p>{`  line 38 of `}<inlineCode parentName=\"p\">{`org.pwte.example.resources.ProductResource.java`}</inlineCode>{` is changed as shown below:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-java\"\n      }}>{`...\nInitialContext().lookup(\"java:app/CustomerOrderServices/ProductSearchServiceImpl!org.pwte.example.service.ProductSearchService\");\n...\n`}</code></pre>\n    <p>{`This completes all of the required code changes for the Customer Order Services application to run on the WebSphere Liberty runtime.`}</p>\n    <h2>{`Create the WebSphere Liberty server.xml file`}</h2>\n    <p>{`WebSphere Liberty is configured by exception. The runtime environment operates from a set of built-in configuration default settings, and you only need to specify configuration that overrides those default settings. You do this by editing either the `}<inlineCode parentName=\"p\">{`server.xml`}</inlineCode>{` file or another XML file that is included in `}<inlineCode parentName=\"p\">{`server.xml`}</inlineCode>{` at run time. The configuration has the following characteristics:`}</p>\n    <ul>\n      <li parentName=\"ul\">{`Described in XML files.`}</li>\n      <li parentName=\"ul\">{`Human-readable, and editable in a text editor.`}</li>\n      <li parentName=\"ul\">{`Small, easy to back up, and easy to copy to another system.`}</li>\n      <li parentName=\"ul\">{`Shareable across an application development team.`}</li>\n      <li parentName=\"ul\">{`Composable, so that features can easily add their own configuration to the system.`}</li>\n      <li parentName=\"ul\">{`Extensibly-typed, so you don’t have to modify the current configuration to work with later versions of the runtime environment.`}</li>\n      <li parentName=\"ul\">{`Dynamically responsive to updates.`}</li>\n      <li parentName=\"ul\">{`Forgiving, so that missing values are assumed and unrecognized properties are ignored.`}</li>\n    </ul>\n    <p><strong parentName=\"p\">{`Features`}</strong>{` are the units of functionality by which you control the pieces of the runtime environment that are loaded into a particular server. They are the primary mechanism that makes the server composable. The list of features that you specify in the server configuration provides a functional server. See `}<a parentName=\"p\" {...{\n        \"href\": \"https://www.ibm.com/support/knowledgecenter/SSEQTP_liberty/com.ibm.websphere.wlp.doc/ae/rwlp_feat.html\"\n      }}>{`Liberty features`}</a>{` for more information.`}</p>\n    <p>{`In this section, the `}<inlineCode parentName=\"p\">{`server.xml`}</inlineCode>{` file to prepare the Liberty server to run the Customer Order Services application will be reviewed. The file can be found `}<a parentName=\"p\" {...{\n        \"href\": \"https://github.com/ibm-cloud-architecture/appmod-liberty-tekton/blob/master/liberty/server.xml\"\n      }}>{`here`}</a>{`. and is shown below:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-xml\"\n      }}>{`<server>\n  <featureManager>\n      <feature>appSecurity-2.0</feature>\n      <feature>ldapRegistry-3.0</feature>\n      <feature>localConnector-1.0</feature>\n      <feature>ejbLite-3.1</feature>\n      <feature>jaxrs-1.1</feature>\n      <feature>jdbc-4.1</feature>\n      <feature>jpa-2.0</feature>\n      <feature>jsp-2.3</feature>\n      <feature>servlet-3.1</feature>\n      <feature>monitor-1.0</feature>\n  </featureManager>\n\n  <library id=\"DB2Lib\">\n    <fileset dir=\"/opt/ibm/wlp/usr/shared/resources/db2\" includes=\"db2jcc4.jar db2jcc_license_cu.jar\"/>\n  </library>\n\n  <dataSource id=\"OrderDS\" jndiName=\"jdbc/orderds\" type=\"javax.sql.XADataSource\">\n    <jdbcDriver libraryRef=\"DB2Lib\"/>\n    <properties.db2.jcc databaseName=\"\\${env.DB2_DBNAME}\" password=\"\\${env.DB2_PASSWORD}\" portNumber=\"\\${env.DB2_PORT}\" serverName=\"\\${env.DB2_HOST}\" user=\"\\${env.DB2_USER}\"/>\n    <connectionManager agedTimeout=\"0\" connectionTimeout=\"180\" maxIdleTime=\"1800\" maxPoolSize=\"10\" minPoolSize=\"1\" reapTime=\"180\"/>\n  </dataSource>\n\n  <httpEndpoint host=\"*\" httpPort=\"9080\" httpsPort=\"9443\" id=\"defaultHttpEndpoint\">\n    <tcpOptions soReuseAddr=\"true\"/>\n  </httpEndpoint>\n\n  <keyStore id=\"defaultKeyStore\" password=\"whodunit\"/>\n  <!-- User and group security definitions -->\n\n  <basicRegistry id=\"basic\" realm=\"customRealm\">\n    <user name=\"rbarcia\" password=\"bl0wfish\"/>\n    <group name=\"SecureShopper\">\n      <member name=\"rbarcia\"/>\n     </group>\n  </basicRegistry>\n\n  <applicationMonitor updateTrigger=\"mbean\"/>\n\n  <application id=\"customerOrderServicesApp\" name=\"CustomerOrderServicesApp-0.1.0-SNAPSHOT.ear\" type=\"ear\" location=\"CustomerOrderServicesApp-0.1.0-SNAPSHOT.ear\">\n    <classloader apiTypeVisibility=\"spec, ibm-api, third-party\" />\n  </application>\n\n</server>\n`}</code></pre>\n    <p>{`The `}<inlineCode parentName=\"p\">{`features`}</inlineCode>{` section contains the following features:`}</p>\n    <ul>\n      <li parentName=\"ul\"><inlineCode parentName=\"li\">{`ejbLite-3.1`}</inlineCode>{`: the feature required to run simple Stateless Session Enterprise Java Beans`}</li>\n      <li parentName=\"ul\"><inlineCode parentName=\"li\">{`jpa-2.0`}</inlineCode>{`, `}<inlineCode parentName=\"li\">{`jdbc-4.1`}</inlineCode>{`: the features required for the JPA 2.0 runtime`}</li>\n      <li parentName=\"ul\"><inlineCode parentName=\"li\">{`jaxrs-1-1`}</inlineCode>{`: the feature required for the JAX-RS 1.1 runtime`}</li>\n      <li parentName=\"ul\"><inlineCode parentName=\"li\">{`servlet-3.1`}</inlineCode>{`, `}<inlineCode parentName=\"li\">{`jsp-2.3`}</inlineCode>{`: the features required for Servlets and JSPs`}</li>\n      <li parentName=\"ul\"><inlineCode parentName=\"li\">{`ldapRegistry-3.0`}</inlineCode>{`, `}<inlineCode parentName=\"li\">{`appSecurity-2.0`}</inlineCode>{`: the features required to secure access to the application using LDAP or a local user registry`}</li>\n      <li parentName=\"ul\"><inlineCode parentName=\"li\">{`monitor-1.0`}</inlineCode>{`: this feature enables the Performance Monitoring Infrastructure (PMI) for other features the server is running. Monitoring data is accessible through standard MXBeans.`}</li>\n    </ul>\n    <p>{`The `}<inlineCode parentName=\"p\">{`library`}</inlineCode>{` and `}<inlineCode parentName=\"p\">{`dataSource`}</inlineCode>{` sections configure a `}<inlineCode parentName=\"p\">{`JDBC Driver`}</inlineCode>{` for DB2 and a `}<inlineCode parentName=\"p\">{`DataSource`}</inlineCode>{` for the database used by the application. Note that some values have a `}<inlineCode parentName=\"p\">{`{env.}`}</inlineCode>{` prefix which is used to allow the values to be read from the environment instead of being hard-coded. This will be discussed in more detail in the `}<strong parentName=\"p\">{`Environment Specific Configuration`}</strong>{` section later.`}</p>\n    <p>{`The `}<inlineCode parentName=\"p\">{`basicRegistry`}</inlineCode>{` section configures a local user registry with a single user (`}<inlineCode parentName=\"p\">{`rbarcia`}</inlineCode>{`) and a single group (`}<inlineCode parentName=\"p\">{`SecureShopper`}</inlineCode>{`). This is often used for development and testing when an LDAP server isn’t available and is sufficient for this scenario.`}</p>\n    <p>{`The `}<inlineCode parentName=\"p\">{`applicationMonitor`}</inlineCode>{` tag is used with Eclipse and triggers the application to be reloaded when a deployment from Eclipse occurs.`}</p>\n    <p>{`The `}<inlineCode parentName=\"p\">{`application`}</inlineCode>{` tag describes the CustomerOrderServices EAR with an `}<inlineCode parentName=\"p\">{`id`}</inlineCode>{`, `}<inlineCode parentName=\"p\">{`name`}</inlineCode>{` and `}<inlineCode parentName=\"p\">{`location`}</inlineCode>{`. In this case the default location of the `}<inlineCode parentName=\"p\">{`apps`}</inlineCode>{` folder is used. The `}<inlineCode parentName=\"p\">{`classloader`}</inlineCode>{` tag is used to allow the application access to the Java Classes that make up the JEE specification (`}<inlineCode parentName=\"p\">{`spec`}</inlineCode>{`), some IBM provided APIs (`}<inlineCode parentName=\"p\">{`ibm-api`}</inlineCode>{`) and third-party classes such as `}<inlineCode parentName=\"p\">{`apache-wink`}</inlineCode>{` as these classes are hidden from the application by default.`}</p>\n    <p>{`The `}<inlineCode parentName=\"p\">{`classloader`}</inlineCode>{` is configured becuase IBM Cloud Transformation Advisor highlighted that the application needed access to the Apach Wink APIs:`}</p>\n    <p><strong parentName=\"p\">{`The user of system provided Apache Wink APIs requires configuration`}</strong>{` To use system-provided third-party APIs in Liberty applications, you must configure the applications to include the APIs. In WebSphere Application Server traditional, these APIs are available without configuration. This is a configuration only change and can be achieved by using a `}<inlineCode parentName=\"p\">{`classloader`}</inlineCode>{` definition in the Liberty server.xml file.`}</p>\n    <h2>{`Handling environment specific configuration`}</h2>\n    <p>{`Applications deployed to an Application Server typically require access to backend services such as Databases, Message Queues, LDAP servers and other applications. Connection information for the backend services might include URL, Hostname, Port, UserID and Password and this information is often different depending on the environment (e.g. Dev, Test or Production) that the application is deployed to. In the case of the Customer Order Services application, a connection to a DB2 database is required.`}</p>\n    <p>{`In order to take advantage of the portability provided by a platform such as Kubernetes and the speed of DevOps it is necessary to deploy applications in `}<strong parentName=\"p\">{`immutable`}</strong>{` containers using automation.`}</p>\n    <p>{`In this context, `}<strong parentName=\"p\">{`immutable`}</strong>{` means that a container will not be modified during its life: no updates, no patches, no configuration changes. If you need to update the application code or apply a patch, you build a new image and deploy it. In order to achieve this, it is necessary to inject environment specific configuration in to the container in each environment (Database UserIDs and Passwords for example) instead of hard-coding the values in properties files in the container.`}</p>\n    <p>{`The goal is to deploy the application in a portable, immutable container and in order to achieve that any `}<strong parentName=\"p\">{`environment specific`}</strong>{` configuration should be externalized from the container image and injected by the platform. In the Kubernetes world this is achieved using Environment Variables, ConfigMaps and Secrets.`}</p>\n    <p>{`Using the `}<inlineCode parentName=\"p\">{`env.`}</inlineCode>{` prefex in the WebSphere Liberty `}<inlineCode parentName=\"p\">{`server.xml`}</inlineCode>{` forces the runtime to use the value of the environment variable when the server starts. See the `}<a parentName=\"p\" {...{\n        \"href\": \"https://www.ibm.com/support/knowledgecenter/en/SSEQTP_liberty/com.ibm.websphere.wlp.doc/ae/twlp_setup_vars.html\"\n      }}>{`documentation`}</a>{` for more details. In the snippet below from the Customer Order Services application `}<inlineCode parentName=\"p\">{`server.xml`}</inlineCode>{` file, the `}<inlineCode parentName=\"p\">{`host`}</inlineCode>{`, `}<inlineCode parentName=\"p\">{`portNumber`}</inlineCode>{`, `}<inlineCode parentName=\"p\">{`databaseName`}</inlineCode>{`, `}<inlineCode parentName=\"p\">{`user`}</inlineCode>{` and `}<inlineCode parentName=\"p\">{`password`}</inlineCode>{` have all been externalized as `}<strong parentName=\"p\">{`environment variables`}</strong>{` which allows this application image to be moved between environments that have different databases without changing the image.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-xml\"\n      }}>{`<dataSource id=\"OrderDS\" jndiName=\"jdbc/orderds\" type=\"javax.sql.XADataSource\">\n  <jdbcDriver libraryRef=\"DB2Lib\"/>\n  <properties.db2.jcc databaseName=\"\\${env.DB2_DBNAME}\" password=\"\\${env.DB2_PASSWORD}\" portNumber=\"\\${env.DB2_PORT}\" serverName=\"\\${env.DB2_HOST}\" user=\"\\${env.DB2_USER}\"/>\n  <connectionManager agedTimeout=\"0\" connectionTimeout=\"180\" maxIdleTime=\"1800\" maxPoolSize=\"10\" minPoolSize=\"1\" reapTime=\"180\"/>\n</dataSource>\n`}</code></pre>\n    <p>{`In a native development environment (non-Docker) a `}<inlineCode parentName=\"p\">{`server.env`}</inlineCode>{` file can be used to inject the environment variables directly in to WebSphere Liberty when it starts. This avoids having to set environment variables on the development machine. This file is placed in the same folder as the `}<inlineCode parentName=\"p\">{`server.xml`}</inlineCode>{` file and is read by Liberty on startup. The file can be found `}<a parentName=\"p\" {...{\n        \"href\": \"https://github.com/ibm-cloud-architecture/appmod-liberty-tekton/blob/master/liberty/server.env\"\n      }}>{`here`}</a>{`. and is shown below:`}</p>\n    <pre><code parentName=\"pre\" {...{}}>{`DB2_HOST=172.16.52.252\nDB2_PORT=50000\nDB2_DBNAME=ORDERDB\nDB2_USER=db2inst1\nDB2_PASSWORD=db2inst1\n`}</code></pre>\n    <h3>{`Monitoring`}</h3>\n    <p><a parentName=\"p\" {...{\n        \"href\": \"https://prometheus.io/\"\n      }}>{`Prometheus`}</a>{` and `}<a parentName=\"p\" {...{\n        \"href\": \"https://grafana.com\"\n      }}>{`Grafana`}</a>{` are widely used in Kubernetes to monitor applications. Prometheus is a systems and service monitoring system. It collects metrics from configured targets at given intervals, evaluates rule expressions, displays the results, and can trigger alerts if some condition is observed to be true.`}</p>\n    <p>{`Prometheus has several components for the collection of Time Series Data, an Alert Manager and a central Prometheus Server which scrapes and stores the data. The data is visualized using a Grafana instance.`}</p>\n    <h4>{`Kubernetes Monitoring`}</h4>\n    <p>{`Prometheus can monitor Kubernetes and the application pods. For Kubernetes data is related to the overall cluster state such as pod state (running, pending, error etc), cluster CPU usage and cluster RAM usage. Individual pod data is also available including CPU and RAM usage. This data is useful for an overall cluster view but it doesn’t provide application specific data.`}</p>\n    <span {...{\n      \"className\": \"gatsby-resp-image-wrapper\",\n      \"style\": {\n        \"position\": \"relative\",\n        \"display\": \"block\",\n        \"marginLeft\": \"auto\",\n        \"marginRight\": \"auto\",\n        \"maxWidth\": \"960px\"\n      }\n    }}>{`\n      `}<span parentName=\"span\" {...{\n        \"className\": \"gatsby-resp-image-background-image\",\n        \"style\": {\n          \"paddingBottom\": \"56.94444444444444%\",\n          \"position\": \"relative\",\n          \"bottom\": \"0\",\n          \"left\": \"0\",\n          \"backgroundImage\": \"url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAALABQDASIAAhEBAxEB/8QAGAAAAgMAAAAAAAAAAAAAAAAAAAECAwX/xAAWAQEBAQAAAAAAAAAAAAAAAAACAAH/2gAMAwEAAhADEAAAAd1OFgVAP//EABoQAAICAwAAAAAAAAAAAAAAAAECABARIkH/2gAIAQEAAQUCmRCyiuuNv//EABYRAQEBAAAAAAAAAAAAAAAAAAABEf/aAAgBAwEBPwFtf//EABYRAQEBAAAAAAAAAAAAAAAAAAABEf/aAAgBAgEBPwFtf//EABYQAQEBAAAAAAAAAAAAAAAAABABMf/aAAgBAQAGPwI0p//EABoQAQADAAMAAAAAAAAAAAAAAAEAESEQQaH/2gAIAQEAAT8hmidkQpo8V5wHU//aAAwDAQACAAMAAAAQBD//xAAWEQEBAQAAAAAAAAAAAAAAAAAAARH/2gAIAQMBAT8QXR//xAAVEQEBAAAAAAAAAAAAAAAAAAABAP/aAAgBAgEBPxCSb//EABoQAQEBAAMBAAAAAAAAAAAAAAERACExQbH/2gAIAQEAAT8QEA1KLCk6yH1EmejAt6vxliOYeu//2Q==')\",\n          \"backgroundSize\": \"cover\",\n          \"display\": \"block\"\n        }\n      }}></span>{`\n  `}<img parentName=\"span\" {...{\n        \"className\": \"gatsby-resp-image-image\",\n        \"alt\": \"Analysis\",\n        \"title\": \"Analysis\",\n        \"src\": \"/modernization-playbook/static/cbd329cd24bdd69aa0817e3f936f0ac5/41eff/grafana-basic.jpg\",\n        \"srcSet\": [\"/modernization-playbook/static/cbd329cd24bdd69aa0817e3f936f0ac5/69549/grafana-basic.jpg 288w\", \"/modernization-playbook/static/cbd329cd24bdd69aa0817e3f936f0ac5/473e3/grafana-basic.jpg 576w\", \"/modernization-playbook/static/cbd329cd24bdd69aa0817e3f936f0ac5/41eff/grafana-basic.jpg 960w\"],\n        \"sizes\": \"(max-width: 960px) 100vw, 960px\",\n        \"style\": {\n          \"width\": \"100%\",\n          \"height\": \"100%\",\n          \"margin\": \"0\",\n          \"verticalAlign\": \"middle\",\n          \"position\": \"absolute\",\n          \"top\": \"0\",\n          \"left\": \"0\"\n        },\n        \"loading\": \"lazy\"\n      }}></img>{`\n    `}</span>\n    <h4>{`Application Monitoring`}</h4>\n    <p>{`Prometheus can pull metrics data from applications using `}<strong parentName=\"p\">{`scraping`}</strong>{`. It is the responsibility of the application to make their metrics available on a `}<inlineCode parentName=\"p\">{`/metrics`}</inlineCode>{` endpoint which Prometheus `}<em parentName=\"p\">{`scrapes`}</em>{` and stores the data in its database for later visualization using Grafana.`}</p>\n    <p>{`An example of the results from a `}<inlineCode parentName=\"p\">{`/metrics`}</inlineCode>{` scrape are shown below. Metrics related to connection pools, thread pools, CPU, memory and JVM heap usage are more useful for a Java application that the basic pod metrics available by default.`}</p>\n    <pre><code parentName=\"pre\" {...{}}>{`base:classloader_current_loaded_class_count 16266\nbase:classloader_total_loaded_class_count 16372\nbase:classloader_total_unloaded_class_count 106\nbase:cpu_available_processors 8\nbase:cpu_process_cpu_load_percent 8.262355256251326E-4\nbase:gc_global_count 245\nbase:gc_global_time_seconds 13.756\nbase:gc_scavenge_count 9467\nbase:gc_scavenge_time_seconds 21.759\nbase:jvm_uptime_seconds 346146.925\nbase:memory_committed_heap_bytes 7.1892992E7\nbase:memory_max_heap_bytes 5.36870912E8\nbase:memory_used_heap_bytes 5.0641512E7\nbase:thread_count 77\nbase:thread_daemon_count 74\nbase:thread_max_count 91\nvendor:connectionpool_jdbc_orderds_connection_handles 0\nvendor:connectionpool_jdbc_orderds_create_total 7\nvendor:connectionpool_jdbc_orderds_destroy_total 7\nvendor:connectionpool_jdbc_orderds_free_connections 0\nvendor:connectionpool_jdbc_orderds_in_use_time_total_seconds 0.71\nvendor:connectionpool_jdbc_orderds_managed_connections 0\nvendor:connectionpool_jdbc_orderds_queued_requests_total 0\nvendor:connectionpool_jdbc_orderds_used_connections_total 7\nvendor:connectionpool_jdbc_orderds_wait_time_total_seconds 0.0\nvendor:servlet_com_ibm_ws_microprofile_metrics_public_public_metrics_rest_proxy_servlet_request_total 5771\nvendor:servlet_com_ibm_ws_microprofile_metrics_public_public_metrics_rest_proxy_servlet_response_time_total_seconds 27.157690424000002\nvendor:servlet_customer_order_services_app_org_pwte_example_app_customer_services_app_request_total 6\nvendor:servlet_customer_order_services_app_org_pwte_example_app_customer_services_app_response_time_total_seconds 1.889112088\nvendor:session_default_host_metrics_active_sessions 0\nvendor:session_default_host_metrics_create_total 1\nvendor:session_default_host_metrics_invalidated_total 1\nvendor:session_default_host_metrics_invalidatedby_timeout_total 1\nvendor:session_default_host_metrics_live_sessions 0\nvendor:threadpool_default_executor_active_threads 1\nvendor:threadpool_default_executor_size 24\n`}</code></pre>\n    <h4>{`Metrics scraping with WebSphere Liberty`}</h4>\n    <p>{`WebSphere Liberty provides a `}<inlineCode parentName=\"p\">{`monitoring-1.0`}</inlineCode>{` feature which enables the Performance Monitoring Infrastructure (PMI) for other features the server is running and makes the monitoring data available via MXBeans. `}<strong parentName=\"p\">{`Prometheus cannot scrape MXBeans`}</strong>{`.`}</p>\n    <p>{`WebSphere Liberty also provides a `}<inlineCode parentName=\"p\">{`mpMetrics`}</inlineCode>{` feature which takes the data from the MXBeans and exposes it on a `}<inlineCode parentName=\"p\">{`/metrics`}</inlineCode>{` endpoint that can be read by Prometheus. `}<strong parentName=\"p\">{`However, the mpMetrics feature is only available to applications using JavaEE7 or newer features.`}</strong></p>\n    <p>{`The Customer Order Services application uses the `}<inlineCode parentName=\"p\">{`jpa-2.0`}</inlineCode>{`, `}<inlineCode parentName=\"p\">{`jaxrs-1.1`}</inlineCode>{` and `}<inlineCode parentName=\"p\">{`ejbLite-3.1`}</inlineCode>{` features which are older than JavaEE7 and is therefore unable to use the `}<inlineCode parentName=\"p\">{`mpMetrics`}</inlineCode>{` feature and can’t expose a `}<inlineCode parentName=\"p\">{`/metrics`}</inlineCode>{` endpoint for Prometheus.`}</p>\n    <h4>{`Prometheus JMX exporter`}</h4>\n    <p>{`A solution to the problem that the Customer Order Services application has is to use `}<a parentName=\"p\" {...{\n        \"href\": \"https://github.com/prometheus/jmx_exporter\"\n      }}>{`Prometheus JMX exporter`}</a>{`. The Prometheus JMX exporter connects to any MXBeans on a JVM, retrieves their data and exposes the results on a `}<inlineCode parentName=\"p\">{`/metrics`}</inlineCode>{` endpoint so that the data can be scraped by Prometheus.`}</p>\n    <p>{`The JMX exporter is made up of a `}<a parentName=\"p\" {...{\n        \"href\": \"https://github.com/ibm-cloud-architecture/appmod-liberty-tekton/blob/master/resources/jmx_exporter\"\n      }}>{`JAR file`}</a>{` and a `}<a parentName=\"p\" {...{\n        \"href\": \"https://github.com/ibm-cloud-architecture/appmod-liberty-tekton/blob/master/resources/jmx_exporter/jmx-config.yml\"\n      }}>{`configuration file`}</a>{`. The configuration file used for the Customer Order Services application is shown below.`}</p>\n    <pre><code parentName=\"pre\" {...{}}>{`---\nstartDelaySeconds: 0\nssl: false\nlowercaseOutputName: false\nlowercaseOutputLabelNames: false\n`}</code></pre>\n    <p>{`In order to connect the JMX exporter and configuration file to Liberty on startup, a `}<inlineCode parentName=\"p\">{`jvm.options`}</inlineCode>{` file is required. The `}<a parentName=\"p\" {...{\n        \"href\": \"https://github.com/ibm-cloud-architecture/appmod-liberty-tekton/blob/master/liberty/jvm.options\"\n      }}>{`jvm.options`}</a>{` file is shown below.`}</p>\n    <pre><code parentName=\"pre\" {...{}}>{`-javaagent:/opt/ibm/wlp/usr/shared/resources/jmx_exporter/jmx_prometheus_javaagent-0.11.0.jar=9081:/opt/ibm/wlp/usr/shared/resources/jmx_exporter/jmx-config.yml\n`}</code></pre>\n    <p>{`An example of the dashboard that is now possible in Grafana is shown below. In this case the dashboard shows data about Servlets and Thread Pools.`}</p>\n    <span {...{\n      \"className\": \"gatsby-resp-image-wrapper\",\n      \"style\": {\n        \"position\": \"relative\",\n        \"display\": \"block\",\n        \"marginLeft\": \"auto\",\n        \"marginRight\": \"auto\",\n        \"maxWidth\": \"1152px\"\n      }\n    }}>{`\n      `}<span parentName=\"span\" {...{\n        \"className\": \"gatsby-resp-image-background-image\",\n        \"style\": {\n          \"paddingBottom\": \"53.125%\",\n          \"position\": \"relative\",\n          \"bottom\": \"0\",\n          \"left\": \"0\",\n          \"backgroundImage\": \"url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAALABQDASIAAhEBAxEB/8QAFQABAQAAAAAAAAAAAAAAAAAAAAX/xAAUAQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIQAxAAAAG8AD//xAAUEAEAAAAAAAAAAAAAAAAAAAAg/9oACAEBAAEFAl//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAUEAEAAAAAAAAAAAAAAAAAAAAg/9oACAEBAAY/Al//xAAYEAADAQEAAAAAAAAAAAAAAAAAEBFBgf/aAAgBAQABPyHhCLV//9oADAMBAAIAAwAAABAgz//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8QP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8QP//EABgQAQEBAQEAAAAAAAAAAAAAAAABcRGB/9oACAEBAAE/EOYeGIlqkf/Z')\",\n          \"backgroundSize\": \"cover\",\n          \"display\": \"block\"\n        }\n      }}></span>{`\n  `}<img parentName=\"span\" {...{\n        \"className\": \"gatsby-resp-image-image\",\n        \"alt\": \"Dashboard\",\n        \"title\": \"Dashboard\",\n        \"src\": \"/modernization-playbook/static/83fa68ba18888d335f7c96005650a14c/2e753/new-dashboard.jpg\",\n        \"srcSet\": [\"/modernization-playbook/static/83fa68ba18888d335f7c96005650a14c/69549/new-dashboard.jpg 288w\", \"/modernization-playbook/static/83fa68ba18888d335f7c96005650a14c/473e3/new-dashboard.jpg 576w\", \"/modernization-playbook/static/83fa68ba18888d335f7c96005650a14c/2e753/new-dashboard.jpg 1152w\", \"/modernization-playbook/static/83fa68ba18888d335f7c96005650a14c/152ec/new-dashboard.jpg 1205w\"],\n        \"sizes\": \"(max-width: 1152px) 100vw, 1152px\",\n        \"style\": {\n          \"width\": \"100%\",\n          \"height\": \"100%\",\n          \"margin\": \"0\",\n          \"verticalAlign\": \"middle\",\n          \"position\": \"absolute\",\n          \"top\": \"0\",\n          \"left\": \"0\"\n        },\n        \"loading\": \"lazy\"\n      }}></img>{`\n    `}</span>\n    <p>{`More details related to the metrics exposed by WebSphere Liberty and how to visualize them with Grafana will be covered in the `}<a parentName=\"p\" {...{\n        \"href\": \"liberty-deploy.md\"\n      }}><strong parentName=\"a\">{`Liberty - Deploy`}</strong>{` section`}</a></p>\n    <h2>{`Project Structure`}</h2>\n    <p>{`The git project for the Customer Order Services application already has the following structure:`}</p>\n    <pre><code parentName=\"pre\" {...{}}>{`├── CustomerOrderServices\n|   ├── ejbModule\n|   |   └── <source code>\n│   └── pom.xml\n├── CustomerOrderServicesApp\n│   ├── META-INF\n|   |   └── <descriptor files>\n│   └── pom.xml\n├── CustomerOrderServiceProject\n│   └── pom.xml\n├── CustomerOrderServiceTest\n│   ├── WebContent\n│   ├── src\n|   |   └── <source code>\n│   └── pom.xml\n└── CustomerOrderServiceWeb\n    ├── WebContent\n    ├── src\n    |   └── <source code>\n    └── pom.xml\n`}</code></pre>\n    <p>{`It is now necessary to add the WebSphere Liberty, DB2 and JMX Exporter files to the git project so that they can be pulled in to the Docker image during Docker build.`}</p>\n    <p>{`The following folders and files have been added to the project:`}</p>\n    <pre><code parentName=\"pre\" {...{}}>{`├── resources\n|   ├── db2\n|   |   └── db2jcc4.jar\n|   |   └── db2jcc_license_cu.jar\n│   └── jmx_exporter\n|   |   └── jmx-config.yml\n|   |   └── jmx_prometheus_javaagent-0.11.0.jar\n└── liberty\n    └── server.xml\n    └── server.env\n    └── jvm.options\n`}</code></pre>\n    <h2>{`Create the Docker Dockerfile`}</h2>\n    <p>{`Once the application code changes have been made and WebSphere Liberty configuration has been created the next step is to build a Docker image that contains the application and configuration. The build script to create a Docker image is a `}<a parentName=\"p\" {...{\n        \"href\": \"https://docs.docker.com/engine/reference/builder/\"\n      }}>{`Dockerfile`}</a>{`.`}</p>\n    <p>{`The `}<inlineCode parentName=\"p\">{`Dockerfile`}</inlineCode>{` for the Customer Order Services application is shown below. The file can be found `}<a parentName=\"p\" {...{\n        \"href\": \"https://github.com/ibm-cloud-architecture/appmod-liberty-tekton/blob/master/Dockerfile\"\n      }}>{`here`}</a></p>\n    <pre><code parentName=\"pre\" {...{}}>{`FROM ibmcom/websphere-liberty:kernel-java8-ibmjava-ubi\n\nCOPY --chown=1001:0 ./liberty/server.xml /config/server.xml\nCOPY --chown=1001:0 ./liberty/jvm.options /config/jvm.options\n\nARG SSL=false\nARG MP_MONITORING=false\nARG HTTP_ENDPOINT=false\n\nCOPY --chown=1001:0 ./CustomerOrderServicesApp/target/CustomerOrderServicesApp-0.1.0-SNAPSHOT.ear /config/apps/CustomerOrderServicesApp-0.1.0-SNAPSHOT.ear\nCOPY --chown=1001:0 ./resources/ /opt/ibm/wlp/usr/shared/resources/\n\nRUN configure.sh\n`}</code></pre>\n    <p>{`IBM provides a set of WebSphere Liberty `}<a parentName=\"p\" {...{\n        \"href\": \"https://hub.docker.com/_/websphere-liberty\"\n      }}>{`Docker images`}</a>{`. This scenario uses the Docker images that are based on the `}<a parentName=\"p\" {...{\n        \"href\": \"https://www.redhat.com/en/blog/introducing-red-hat-universal-base-image\"\n      }}>{`RedHat Universal Base Image`}</a>{`. The `}<inlineCode parentName=\"p\">{`ibmcom/websphere-liberty:kernel-java8-ibmjava-ubi`}</inlineCode>{` image contains only the smallest components of the Liberty server. The features used by the application are loaded in to the Docker image later in the `}<inlineCode parentName=\"p\">{`RUN configure.sh`}</inlineCode>{` step.`}</p>\n    <p>{`The first two `}<inlineCode parentName=\"p\">{`COPY`}</inlineCode>{` commands copy the `}<inlineCode parentName=\"p\">{`server.xml`}</inlineCode>{` and `}<inlineCode parentName=\"p\">{`jvm.options`}</inlineCode>{` files to the `}<inlineCode parentName=\"p\">{`/config`}</inlineCode>{` folder on the WebSphere Liberty image. Later in the Dockerfile there are other `}<inlineCode parentName=\"p\">{`COPY`}</inlineCode>{` commands to copy the application that has been created by Maven to `}<inlineCode parentName=\"p\">{`/config/apps`}</inlineCode>{` and the `}<inlineCode parentName=\"p\">{`DB2 drivers`}</inlineCode>{`, `}<inlineCode parentName=\"p\">{`JMX exporter JAR`}</inlineCode>{` and `}<inlineCode parentName=\"p\">{`JMX exporter configuration file`}</inlineCode>{` to the shared resources folder for Liberty.`}</p>\n    <h2>{`Run the application locally`}</h2>\n    <p>{`Now that the application code changes have been made, the WebSphere Liberty configuration has been created and the Dockerfile is ready, the next step is to build a Docker image and run an instance locally to validate that the application runs correctly.`}</p>\n    <ul>\n      <li parentName=\"ul\">{`Clone the GitHub repo using the following steps:`}</li>\n    </ul>\n    <pre><code parentName=\"pre\" {...{}}>{`git clone https://github.com/ibm-cloud-architecture/appmod-liberty-tekton\ncd appmod-liberty-tekton\n`}</code></pre>\n    <ul>\n      <li parentName=\"ul\">{`Use Maven to build the application`}</li>\n    </ul>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-bash\"\n      }}>{`mvn clean package\n`}</code></pre>\n    <p>{`The `}<inlineCode parentName=\"p\">{`CustomerOrderServicesApp-0.1.0-SNAPSHOT.ear`}</inlineCode>{` file should now be present in `}<inlineCode parentName=\"p\">{`CustomerOrderServicesApp/target/`}</inlineCode></p>\n    <ul>\n      <li parentName=\"ul\">{`Modify the `}<inlineCode parentName=\"li\">{`liberty/server.env`}</inlineCode>{` file for your environment as shown below:`}</li>\n    </ul>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-bash\"\n      }}>{`DB2_HOST=172.16.52.252\nDB2_PORT=50000\nDB2_DBNAME=ORDERDB\nDB2_USER=db2inst1\nDB2_PASSWORD=db2inst1\n`}</code></pre>\n    <ul>\n      <li parentName=\"ul\">{`Build the Docker image using the following commands:`}</li>\n    </ul>\n    <pre><code parentName=\"pre\" {...{}}>{`docker build -t customerorderservices-local:1.0 .\n`}</code></pre>\n    <p>{`  The end of the `}<inlineCode parentName=\"p\">{`docker build`}</inlineCode>{` command output should be similar to that shown below:`}</p>\n    <pre><code parentName=\"pre\" {...{}}>{`...\nAll assets were successfully installed.\n\nStart product validation...\nProduct validation completed successfully.\n+ sort -z\n+ xargs -0 -n 1 -r -I '{}' java -jar '{}' --installLocation /opt/ibm/wlp\n+ find /opt/ibm/fixes -type f -name '*.jar' -print0\n+ xargs -0 -r chmod -R g+rw\n+ find /opt/ibm/wlp -perm -g=w -print0\n+ /opt/ibm/wlp/bin/server start\n\nStarting server defaultServer.\nServer defaultServer started with process ID 127.\n+ /opt/ibm/wlp/bin/server stop\n\nStopping server defaultServer.\nServer defaultServer stopped.\n+ rm -rf /output/resources/security/ /output/messaging /logs/console.log /logs/messages.log /logs/messages_19.06.25_16.12.03.0.log /opt/ibm/wlp/output/.classCache\n+ chmod -R g+rwx /opt/ibm/wlp/output/defaultServer\n+ find /opt/ibm/wlp -type d -perm -g=x -print0\n+ xargs -0 -r chmod -R g+rwx\nRemoving intermediate container c08b8b001320\n ---> 2897b25fa45e\nSuccessfully built 2897b25fa45e\nSuccessfully tagged customerorderservices-local:1.0\n\n`}</code></pre>\n    <ul>\n      <li parentName=\"ul\">{`Run the newly created Docker image using the commands below:`}</li>\n    </ul>\n    <pre><code parentName=\"pre\" {...{}}>{`docker run --name customerorderservices-local -d -p 9081:9081 -p 9443:9443 -v \\${PWD}/liberty/server.env:/config/server.env customerorderservices-local:1.0\n`}</code></pre>\n    <p>{`This command injects the server.env file in the correct location so that it is loaded by WebSphere Liberty on startup.`}</p>\n    <ul>\n      <li parentName=\"ul\">{`Check the logs for the WebSphere Liberty server using:`}</li>\n    </ul>\n    <pre><code parentName=\"pre\" {...{}}>{`docker logs customerorderservices-local\n`}</code></pre>\n    <p>{`The result should be that the server is started without error and the application is loaded:`}</p>\n    <pre><code parentName=\"pre\" {...{}}>{`Launching defaultServer (WebSphere Application Server 19.0.0.5/wlp-1.0.28.cl190520190522-2227) on IBM J9 VM, version 8.0.5.36 - pxa6480sr5fp36-20190510_01(SR5 FP36) (en_US)\n[AUDIT   ] CWWKE0001I: The server defaultServer has been launched.\n[AUDIT   ] CWWKE0100I: This product is licensed for development, and limited production use. The full license terms can be viewed here: https://public.dhe.ibm.com/ibmdl/export/pub/software/websphere/wasdev/license/base_ilan/ilan/19.0.0.5/lafiles/en.html\n[AUDIT   ] CWWKG0093A: Processing configuration drop-ins resource: /opt/ibm/wlp/usr/servers/defaultServer/configDropins/defaults/keystore.xml\n[AUDIT   ] CWWKG0102I: Found conflicting settings for defaultKeyStore instance of keyStore configuration.\n  Property password has conflicting values:\n    Secure value is set in file:/opt/ibm/wlp/usr/servers/defaultServer/configDropins/defaults/keystore.xml.\n    Secure value is set in file:/opt/ibm/wlp/usr/servers/defaultServer/server.xml.\n  Property password will be set to the value defined in file:/opt/ibm/wlp/usr/servers/defaultServer/server.xml.\n\n[AUDIT   ] CWWKZ0058I: Monitoring dropins for applications.\n[AUDIT   ] CWWKS4104A: LTPA keys created in 1.573 seconds. LTPA key file: /opt/ibm/wlp/output/defaultServer/resources/security/ltpa.keys\n[AUDIT   ] CWPKI0803A: SSL certificate created in 5.334 seconds. SSL key file: /opt/ibm/wlp/output/defaultServer/resources/security/key.p12\n[AUDIT   ] CWWKT0016I: Web application available (default_host): http://57edcfea336d:9080/CustomerOrderServicesWeb/\n[AUDIT   ] CWWKT0016I: Web application available (default_host): http://57edcfea336d:9080/CustomerOrderServicesTest/\n[AUDIT   ] CWWKZ0001I: Application CustomerOrderServicesApp-0.1.0-SNAPSHOT.ear started in 2.837 seconds.\n[AUDIT   ] CWWKF0012I: The server installed the following features: [appSecurity-2.0, beanValidation-1.0, distributedMap-1.0, ejbLite-3.1, el-3.0, federatedRegistry-1.0, jaxrs-1.1, jdbc-4.1, jndi-1.0, jpa-2.0, json-1.0, jsp-2.3, ldapRegistry-3.0, localConnector-1.0, monitor-1.0, servlet-3.1, ssl-1.0].\n[AUDIT   ] CWWKF0011I: The defaultServer server is ready to run a smarter planet. The defaultServer server started in 12.838 seconds.\n`}</code></pre>\n    <ul>\n      <li parentName=\"ul\">{`Access the application in a browser using `}<inlineCode parentName=\"li\">{`https://127.0.0.1:9443/CustomerOrderServicesWeb`}</inlineCode>{`. Login using `}<inlineCode parentName=\"li\">{`rbarcia`}</inlineCode>{` and `}<inlineCode parentName=\"li\">{`bl0wfish`}</inlineCode>{` and then add an item to the shopping cart\n`}<span parentName=\"li\" {...{\n          \"className\": \"gatsby-resp-image-wrapper\",\n          \"style\": {\n            \"position\": \"relative\",\n            \"display\": \"block\",\n            \"marginLeft\": \"auto\",\n            \"marginRight\": \"auto\",\n            \"maxWidth\": \"986px\"\n          }\n        }}>{`\n      `}<span parentName=\"span\" {...{\n            \"className\": \"gatsby-resp-image-background-image\",\n            \"style\": {\n              \"paddingBottom\": \"65.27777777777779%\",\n              \"position\": \"relative\",\n              \"bottom\": \"0\",\n              \"left\": \"0\",\n              \"backgroundImage\": \"url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAANABQDASIAAhEBAxEB/8QAGAAAAgMAAAAAAAAAAAAAAAAAAAMCBAX/xAAUAQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIQAxAAAAHVai0QHB//xAAbEAACAgMBAAAAAAAAAAAAAAABAgADBBESMf/aAAgBAQABBQK4hKwq64EyhvGXyf/EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8BP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8BP//EABkQAAIDAQAAAAAAAAAAAAAAAAABAhExEP/aAAgBAQAGPwJzaujDCYuf/8QAGxAAAgEFAAAAAAAAAAAAAAAAAAERECFhocH/2gAIAQEAAT8hc+S+B5HATRE8dNKn/9oADAMBAAIAAwAAABCnD//EABURAQEAAAAAAAAAAAAAAAAAAAAR/9oACAEDAQE/EFf/xAAVEQEBAAAAAAAAAAAAAAAAAAAQEf/aAAgBAgEBPxCH/8QAHBABAAMAAgMAAAAAAAAAAAAAAQARIRCBUWGx/9oACAEBAAE/EBsMUp5rLgc0B0INaTomm1Z3pMF6fOP/2Q==')\",\n              \"backgroundSize\": \"cover\",\n              \"display\": \"block\"\n            }\n          }}></span>{`\n  `}<img parentName=\"span\" {...{\n            \"className\": \"gatsby-resp-image-image\",\n            \"alt\": \"App\",\n            \"title\": \"App\",\n            \"src\": \"/modernization-playbook/static/bf870ca426cd3b167d61dd9def92514c/4fff9/app.jpg\",\n            \"srcSet\": [\"/modernization-playbook/static/bf870ca426cd3b167d61dd9def92514c/69549/app.jpg 288w\", \"/modernization-playbook/static/bf870ca426cd3b167d61dd9def92514c/473e3/app.jpg 576w\", \"/modernization-playbook/static/bf870ca426cd3b167d61dd9def92514c/4fff9/app.jpg 986w\"],\n            \"sizes\": \"(max-width: 986px) 100vw, 986px\",\n            \"style\": {\n              \"width\": \"100%\",\n              \"height\": \"100%\",\n              \"margin\": \"0\",\n              \"verticalAlign\": \"middle\",\n              \"position\": \"absolute\",\n              \"top\": \"0\",\n              \"left\": \"0\"\n            },\n            \"loading\": \"lazy\"\n          }}></img>{`\n    `}</span></li>\n    </ul>\n    <ul>\n      <li parentName=\"ul\">{`Validate that the `}<inlineCode parentName=\"li\">{`/metrics`}</inlineCode>{` endpoint is available at `}<inlineCode parentName=\"li\">{`http://127.0.0.1:9081/metrics`}</inlineCode>\n        <span parentName=\"li\" {...{\n          \"className\": \"gatsby-resp-image-wrapper\",\n          \"style\": {\n            \"position\": \"relative\",\n            \"display\": \"block\",\n            \"marginLeft\": \"auto\",\n            \"marginRight\": \"auto\",\n            \"maxWidth\": \"1052px\"\n          }\n        }}>{`\n      `}<span parentName=\"span\" {...{\n            \"className\": \"gatsby-resp-image-background-image\",\n            \"style\": {\n              \"paddingBottom\": \"60.06944444444444%\",\n              \"position\": \"relative\",\n              \"bottom\": \"0\",\n              \"left\": \"0\",\n              \"backgroundImage\": \"url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAMABQDASIAAhEBAxEB/8QAGAAAAgMAAAAAAAAAAAAAAAAAAAIBAwX/xAAUAQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIQAxAAAAHYdbCBw//EABkQAAIDAQAAAAAAAAAAAAAAAAACARASMf/aAAgBAQABBQKIMKYUXtf/xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAaEAACAgMAAAAAAAAAAAAAAAAAATKRESBB/9oACAEBAAY/AscIqiKrT//EABkQAQACAwAAAAAAAAAAAAAAAAEAICExYf/aAAgBAQABPyEEwOK6UGp//9oADAMBAAIAAwAAABBQD//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8QP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8QP//EABwQAAIBBQEAAAAAAAAAAAAAAAABgRARMUGR8f/aAAgBAQABPxBwhitwWxkDzxkqf//Z')\",\n              \"backgroundSize\": \"cover\",\n              \"display\": \"block\"\n            }\n          }}></span>{`\n  `}<img parentName=\"span\" {...{\n            \"className\": \"gatsby-resp-image-image\",\n            \"alt\": \"Metrics\",\n            \"title\": \"Metrics\",\n            \"src\": \"/modernization-playbook/static/438aefd436c1fc5ed75bbcf64802c9e8/7ea48/metrics.jpg\",\n            \"srcSet\": [\"/modernization-playbook/static/438aefd436c1fc5ed75bbcf64802c9e8/69549/metrics.jpg 288w\", \"/modernization-playbook/static/438aefd436c1fc5ed75bbcf64802c9e8/473e3/metrics.jpg 576w\", \"/modernization-playbook/static/438aefd436c1fc5ed75bbcf64802c9e8/7ea48/metrics.jpg 1052w\"],\n            \"sizes\": \"(max-width: 1052px) 100vw, 1052px\",\n            \"style\": {\n              \"width\": \"100%\",\n              \"height\": \"100%\",\n              \"margin\": \"0\",\n              \"verticalAlign\": \"middle\",\n              \"position\": \"absolute\",\n              \"top\": \"0\",\n              \"left\": \"0\"\n            },\n            \"loading\": \"lazy\"\n          }}></img>{`\n    `}</span></li>\n    </ul>\n    <ul>\n      <li parentName=\"ul\">{`Stop the Docker container using the commands below:`}</li>\n    </ul>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-bash\"\n      }}>{`docker stop customerorderservices-local\n`}</code></pre>\n    <h2>{`Review and Next Steps`}</h2>\n    <p>{`The intention of this traditional WebSphere V855 —> WebSphere Liberty scenario is to migrate the Customer Order Services application to the cloud-ready new runtime with minimal code changes.`}</p>\n    <p>{`In this section you have moved the application to WebSphere Liberty and tested it locally in a Docker container.`}</p>\n    <p>{`Now proceed to the either the `}<a parentName=\"p\" {...{\n        \"href\": \"liberty-deploy-cloud-native-toolkit\"\n      }}>{`Liberty - Deploy using Cloud Native Toolkit`}</a>{` section or the `}<a parentName=\"p\" {...{\n        \"href\": \"liberty-deploy-openshift-pipelines\"\n      }}>{`Liberty - Deploy using OpenShift Pipelines`}</a>{` section where the process of automating the deployment of the application to a Kubernetes runtime will be covered step-by-step`}</p>\n\n    </MDXLayout>;\n}\n;\nMDXContent.isMDXComponent = true;\n      "],"sourceRoot":""}