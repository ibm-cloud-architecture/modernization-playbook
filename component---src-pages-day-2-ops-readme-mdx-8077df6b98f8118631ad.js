(window.webpackJsonp=window.webpackJsonp||[]).push([[39],{R52p:function(e,a,t){"use strict";t.r(a),t.d(a,"_frontmatter",(function(){return p})),t.d(a,"default",(function(){return l}));var o=t("wx14"),n=t("zLVn"),i=(t("q1tI"),t("7ljp")),r=t("013z"),p=(t("qKvR"),{}),s={_frontmatter:p},c=r.a;function l(e){var a=e.components,t=Object(n.a)(e,["components"]);return Object(i.b)(c,Object(o.a)({},s,t,{components:a,mdxType:"MDXLayout"}),Object(i.b)("h1",null,"Install a Prometheus instance to monitor an Open Liberty application on OCP 4.3"),Object(i.b)("p",null,"We will use the Prometheus Operator provided by OCP to install and configure Prometheus into a new namespace (project). We will then install a test application using the Open Liberty Operator. The application will provide a metrics endpoint for Prometheus to gather statistics.   "),Object(i.b)("h2",null,"1. Test app"),Object(i.b)("p",null,"Use a simple Microprofile metrics demo application from Open Liberty guides\n",Object(i.b)("a",{parentName:"p",href:"https://openliberty.io/guides/microprofile-metrics.html"},"https://openliberty.io/guides/microprofile-metrics.html")),Object(i.b)("p",null,"This app is used ‘as is’ (although we disabled the default security for now to make it simpler to play with).  You can pull the docker image from the hub to run it locally."),Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre"},"docker run -p 9080:9080 yarod/microprofile-monitoring\n")),Object(i.b)("h2",null,"2. Install and configure Prometheus"),Object(i.b)("p",null,"OCP provides a monitoring stack (Prometheus + Grafana) but up to now has not allowed it to be used for user workload monitoring."),Object(i.b)("p",null,"As there is a Liberty monitoring dashboard for Grafana designed to visualize Liberty-specific Microprofile metrics, we will use our own instance of Prometheus to gather the metrics and as a target for a new Grafana instance to display the Liberty dashboard.  "),Object(i.b)("h3",null,"2.1 Create the required Service IDs, ClusterRoles, and ClusterRoleBindings"),Object(i.b)("p",null,"This scenario generally follows Kabanero documentation and installs a separate Prometheus instance."),Object(i.b)("p",null,Object(i.b)("a",{parentName:"p",href:"https://kabanero.io/guides/app-monitoring-ocp4.2"},"https://kabanero.io/guides/app-monitoring-ocp4.2")),Object(i.b)("h4",null,"2.1.1  Create a new Project/Namespace"),Object(i.b)("p",null,"To facilitate security and isolation we want to run Prometheus in its own namespace.  To achieve this we create a new project/namespace for it.  For our example we will call it “prometheus-test”. You must be logged into the OCP system and able to use the Openshift CLI (oc) commands to complete this exercise. We use the “test” suffix throughout our examples but in production you would likely use some other suffix that identifies your applications."),Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre"},"oc new-project prometheus-test\n")),Object(i.b)("h4",null,"2.1.2 Service Accounts"),Object(i.b)("p",null,"Both the ",Object(i.b)("em",{parentName:"p"},"Prometheus Operator")," and ",Object(i.b)("em",{parentName:"p"},"Prometheus")," itself must have an identity (account) when they are run.  Each of these programs requires specific authorizations in order to function. In a Role Based Authentication System (RBAC) like OpenShift these accounts are called ",Object(i.b)("strong",{parentName:"p"},"Service Accounts"),". Roles with cluster wide access are called ",Object(i.b)("strong",{parentName:"p"},"ClusterRoles"),". To connect an account with a clusterrole you use a ",Object(i.b)("strong",{parentName:"p"},"ClusterRoleBinding"),".  Note that you will require admin authority on the cluster to create, alter, or delete cluster roles and bindings."),Object(i.b)("p",null,"The service account for the ",Object(i.b)("em",{parentName:"p"},"Prometheus Operator")," is named ",Object(i.b)("strong",{parentName:"p"},"prometheus-operator"),". To create it copy the file PromOperServiceAccount.yaml and issue the command:"),Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre"},"oc apply -f PromOperServiceAccount.yaml\n")),Object(i.b)("p",null,"Do the same for the next two:"),Object(i.b)("p",null,"The service acccount for ",Object(i.b)("em",{parentName:"p"},"Prometheus")," itself:"),Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre"},"oc apply -f PrometheusServiceAccount.yaml\n")),Object(i.b)("p",null,"Add the 2nd service account that Prometheus expects:"),Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre"},"oc apply -f k8sServiceAccount.yaml\n")),Object(i.b)("p",null,"confirm via:"),Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre"},"oc get serviceaccount\n")),Object(i.b)("p",null,"and you should see the three new service accounts (along with those kubernetes creates for each namespace):"),Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre"},"NAME                  SECRETS   AGE\nbuilder               2         7m49s\ndefault               2         7m49s\ndeployer              2         7m49s\nprometheus            2         115s\nprometheus-k8s        2         4s\nprometheus-operator   2         3m30s\n")),Object(i.b)("h4",null,"2.1.3 Create the Cluster Roles"),Object(i.b)("p",null,"As we are running on an OpenShift system there are cluster roles already for those service IDs. However, those cluster roles were defined for the ",Object(i.b)("em",{parentName:"p"},"openshift-monitoring")," namespace. They may not match those we need for our instance of prometheus.  Additionally, any changes to those cluster roles by cluster administrators can potentially have unknown consequences for our instance."),Object(i.b)("p",null," Therefore, we will create our own versions of the cluster roles (note: if you wish to reuse the existing cluster roles you must still create our prometheus-k8s-test cluster role if you want Prometheus to monitor an application outside its own namespace as the default prometheus-k8s cluster role does not have that ability)."),Object(i.b)("p",null,"You are free to replace the ",Object(i.b)("em",{parentName:"p"},"test")," suffix with something more meaningful but then you must edit the cluster role bindings yaml files  to pick up the new object names."),Object(i.b)("p",null," prometheus-operator-test cluster role:"),Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre"},"oc apply -f promoprole.yaml\n")),Object(i.b)("p",null," prometheus-test cluster role:"),Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre"},"oc apply -f promrole.yaml\n")),Object(i.b)("p",null," prometheus-k8s-test cluster role:"),Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre"},"oc apply -f prometheus-k8s-custom.yaml\n")),Object(i.b)("p",null," Note that the prometheus-k8s-test cluster role is a merge of the default OCP permissions for the prometheus-k8s account and those recommended by the ",Object(i.b)("em",{parentName:"p"},"Prometheus Operator")," documentation."),Object(i.b)("p",null," Before granting users access to the Prometheus namespace it is recommended that you review and understand the permissions for all three service IDs."),Object(i.b)("p",null," Now you can confirm the ClusterRoles you have created via:"),Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre"},"oc get clusterrole\n")),Object(i.b)("p",null," This will display all the ClusterRoles for the system.\nOr confirm them individually:"),Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre"},"oc get clusterrole/prometheus-test\n\noc get clusterrole/prometheus-operator-test\n\noc get clusterrole/prometheus-k8s-test\n")),Object(i.b)("p",null,"To view the contents of an individual clusterrole:"),Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre"},"oc describe clusterrole/prometheus-test\n")),Object(i.b)("p",null,"example output:"),Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre"},'Name:         prometheus-test\nLabels:       <none>\nAnnotations:  kubectl.kubernetes.io/last-applied-configuration:\n                {"apiVersion":"rbac.authorization.k8s.io/v1beta1","kind":"ClusterRole","metadata":{"annotations":{},"name":"prometheus-test"},"rules":[{"a...\nPolicyRule:\n  Resources   Non-Resource URLs  Resource Names  Verbs\n  ---------   -----------------  --------------  -----\n  endpoints   []                 []              [get list watch]\n  nodes       []                 []              [get list watch]\n  pods        []                 []              [get list watch]\n  services    []                 []              [get list watch]\n              [/metrics]         []              [get]\n  configmaps  []                 []              [get]\n')),Object(i.b)("h4",null,"2.1.4 Bind the Service Accounts to their Cluster Roles"),Object(i.b)("p",null,"This is done via a ",Object(i.b)("em",{parentName:"p"},"ClusterRoleBinding"),"."),Object(i.b)("p",null,"prometheus:"),Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre"},"oc apply -f prombinding.yaml\n")),Object(i.b)("p",null,"prometheus-operator:"),Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre"},"oc apply -f promopbinding.yaml\n")),Object(i.b)("p",null,"prometheus-k8s:"),Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre"},"oc apply -f customrolebindingK8s.yaml\n")),Object(i.b)("p",null,"These are based on information in the Github site for the Prometheus Operator. You can refer to it at:  ",Object(i.b)("a",{parentName:"p",href:"https://github.com/coreos/prometheus-operator/"},"https://github.com/coreos/prometheus-operator/")),Object(i.b)("h3",null,"2.2 Create a Prometheus instance"),Object(i.b)("h4",null,"2.2.1 Install the Prometheus Operator"),Object(i.b)("p",null,"From the IBM Cloud Dashboard select the project (in our example: prometheus-test). Then open the ",Object(i.b)("em",{parentName:"p"},"Operators")," section and click on ",Object(i.b)("em",{parentName:"p"},"Installed Operators"),":"),Object(i.b)("span",{className:"gatsby-resp-image-wrapper",style:{position:"relative",display:"block",marginLeft:"auto",marginRight:"auto",maxWidth:"1152px"}},"\n      ",Object(i.b)("span",{parentName:"span",className:"gatsby-resp-image-background-image",style:{paddingBottom:"38.19444444444444%",position:"relative",bottom:"0",left:"0",backgroundImage:"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAAAsTAAALEwEAmpwYAAABtUlEQVQoz31Q7WrUQBTNI5hd01i7CVTXxn5YlS70h0WhIAgiggiC76A+hdjaKlKkfZcFC5tkaZ+j/9x1t5tNMsl8ZI53UlbXP144nJkz5849M9Z2EGCr04HXasH3fTiOA9u20Wg0/oFt2L4G21nAYsvTvufBdV1NXk3nNZrNprZutVdw+04Ad7GFd+8/4Pz8DN1uFz9OT9Hr9RCG0R9EYYgwihDHffT7fR3HMSLaE/QM1srqBtrBGq67S/h8+AWmkiRBlqX4T+k51vMH1tNnz7HzZBcPOtv4+u0IZVliMBxi8GuM4eUUo2mBScoIBbKc0aAMjDFIKY1Xc87NWgshtGHr9Zu3ePHyFR493sX345N6CmMFmTlSJjBMSuQlNXNZa9RYw5RhWa81tL6Ctb75EMHaPbg3PXz8tAdlnsw4VEW2SmF8OaIECmmWUzoGIQXyPKubszwnPSPv3IXm/5bbARrODeztH1C6FBeDCUYpJZElfk4m4DRlnJZICk0aJU+nUDRklFe4GAtMC/X3wrvrm1jduI8lfxn7B4f1UyQvUSkJpRSxooQCFaVVM62qahZCgosrbYbf8HD35Qh6I1YAAAAASUVORK5CYII=')",backgroundSize:"cover",display:"block"}}),"\n  ",Object(i.b)("img",{parentName:"span",className:"gatsby-resp-image-image",alt:"Installed Operators",title:"Installed Operators",src:"/modernization-playbook/static/21ece58a01bd011e5668c4bf0d4a21de/3cbba/InitialInstalledOperators.png",srcSet:["/modernization-playbook/static/21ece58a01bd011e5668c4bf0d4a21de/7fc1e/InitialInstalledOperators.png 288w","/modernization-playbook/static/21ece58a01bd011e5668c4bf0d4a21de/a5df1/InitialInstalledOperators.png 576w","/modernization-playbook/static/21ece58a01bd011e5668c4bf0d4a21de/3cbba/InitialInstalledOperators.png 1152w","/modernization-playbook/static/21ece58a01bd011e5668c4bf0d4a21de/0b124/InitialInstalledOperators.png 1728w","/modernization-playbook/static/21ece58a01bd011e5668c4bf0d4a21de/369ed/InitialInstalledOperators.png 1916w"],sizes:"(max-width: 1152px) 100vw, 1152px",style:{width:"100%",height:"100%",margin:"0",verticalAlign:"middle",position:"absolute",top:"0",left:"0"},loading:"lazy"}),"\n    "),Object(i.b)("p",null,"Our system has only the Open Liberty Operator installed so we must add the Prometheus Operator to it."),Object(i.b)("p",null,"Select the ",Object(i.b)("em",{parentName:"p"},"OperatorHub")," option:"),Object(i.b)("span",{className:"gatsby-resp-image-wrapper",style:{position:"relative",display:"block",marginLeft:"auto",marginRight:"auto",maxWidth:"1152px"}},"\n      ",Object(i.b)("span",{parentName:"span",className:"gatsby-resp-image-background-image",style:{paddingBottom:"37.15277777777778%",position:"relative",bottom:"0",left:"0",backgroundImage:"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAAAsTAAALEwEAmpwYAAABd0lEQVQoz32RXUsCQRSG9ycURdGVirp+9IXaVmupi1LeRdBNF0HQP6lMkS6D6F95qbAaBZW2tuq6rqurztvMYFIRHXg477wzc+bMjOB2ubHu9WEzEoGLakmSkE6nIcsy4vE4EokEUqnUjGQyCSVzgMPDLMlms8wjDOoTRVGI4A+E4RGDcHv9mFtcxuV1DobRQaVSQaPRgGVZnF6v9xvyLc8Qojv7iEoy7XALLq+IfKGIt3oDpVIJ5XKZU61Wf6CqKqdWqxFVnfqPT3itaxBOTs9wdn6Bo+MTJJQM7u4fYDkTfOg6Ou02NE2DTjXrxjTNvyCm2SVcsw5j0i625T3EtmV6bRGF4i1YDAYDnieTCWzbBiEE/8VoNILd70MQQ2sIhNfh8QUwT9/wKncDZzhEs9nki3jR8ZjrMc2s8FdprqdjdjBDCK5uwB8MwyuGsLC0gly+wDezj2Bh9y2YRot6Y9jU00wLL00djuPw+We9g/dWG13D4Ps+AWNPr0GfcOhtAAAAAElFTkSuQmCC')",backgroundSize:"cover",display:"block"}}),"\n  ",Object(i.b)("img",{parentName:"span",className:"gatsby-resp-image-image",alt:"InitialHub",title:"InitialHub",src:"/modernization-playbook/static/5d6b4d3d5caed4dba0fdc01385b02aa7/3cbba/InitialHub.png",srcSet:["/modernization-playbook/static/5d6b4d3d5caed4dba0fdc01385b02aa7/7fc1e/InitialHub.png 288w","/modernization-playbook/static/5d6b4d3d5caed4dba0fdc01385b02aa7/a5df1/InitialHub.png 576w","/modernization-playbook/static/5d6b4d3d5caed4dba0fdc01385b02aa7/3cbba/InitialHub.png 1152w","/modernization-playbook/static/5d6b4d3d5caed4dba0fdc01385b02aa7/0b124/InitialHub.png 1728w","/modernization-playbook/static/5d6b4d3d5caed4dba0fdc01385b02aa7/1d795/InitialHub.png 1902w"],sizes:"(max-width: 1152px) 100vw, 1152px",style:{width:"100%",height:"100%",margin:"0",verticalAlign:"middle",position:"absolute",top:"0",left:"0"},loading:"lazy"}),"\n    "),Object(i.b)("p",null,"Put the name prometheus into the ",Object(i.b)("em",{parentName:"p"},"Filter by keyword")," area:"),Object(i.b)("span",{className:"gatsby-resp-image-wrapper",style:{position:"relative",display:"block",marginLeft:"auto",marginRight:"auto",maxWidth:"1152px"}},"\n      ",Object(i.b)("span",{parentName:"span",className:"gatsby-resp-image-background-image",style:{paddingBottom:"36.80555555555556%",position:"relative",bottom:"0",left:"0",backgroundImage:"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAAAsTAAALEwEAmpwYAAABUUlEQVQoz31QbUvCUBjdz4hCHVpTh6lliRAYto1iGvStoIj+ZKm9fMifEkS4dM7m5u7uuKd7L5pI4IFzXx6ee+55jpJNZ1At6iiVK8ioKlqtFgzDQLPZlGfTNNdomBbO7TbrdNrMtm1RY0talsUUTS8hndOgZjVs7aTw/PoGQhkcx8HE8+D7PuI4RpIkoJwJpaA0FjVG+VnWF7voU+onpzg8bqBaq6Og7+Ox/wKBKIpkg8dFgyAAIUTWIr6TFRmvSYoPhs6QKdd3D7i5vYd9eYUz6wLvg4Fs9qZTKUxogjm/bwCTC4frukyp1RvSYfngCLt5Hd1eH2EYSgok/hSMrJwtHv+jQBDMoOT5mEJIzYkM03jqdvlo87/HwecHfoZf8PnYIoKl4JrFxX0244LFUgU5rYjsXgHbKRU97lBkNh6PZVPIc/sejTBxXRn8JodC8Bf8mLvga7CCSwAAAABJRU5ErkJggg==')",backgroundSize:"cover",display:"block"}}),"\n  ",Object(i.b)("img",{parentName:"span",className:"gatsby-resp-image-image",alt:"HubProm",title:"HubProm",src:"/modernization-playbook/static/8f355469c1fdf22f9707011cbefd154d/3cbba/HubProm.png",srcSet:["/modernization-playbook/static/8f355469c1fdf22f9707011cbefd154d/7fc1e/HubProm.png 288w","/modernization-playbook/static/8f355469c1fdf22f9707011cbefd154d/a5df1/HubProm.png 576w","/modernization-playbook/static/8f355469c1fdf22f9707011cbefd154d/3cbba/HubProm.png 1152w","/modernization-playbook/static/8f355469c1fdf22f9707011cbefd154d/0b124/HubProm.png 1728w","/modernization-playbook/static/8f355469c1fdf22f9707011cbefd154d/fa64a/HubProm.png 1907w"],sizes:"(max-width: 1152px) 100vw, 1152px",style:{width:"100%",height:"100%",margin:"0",verticalAlign:"middle",position:"absolute",top:"0",left:"0"},loading:"lazy"}),"\n    "),Object(i.b)("p",null,"Click on the ",Object(i.b)("em",{parentName:"p"},"Prometheus Operator")," and answer ",Object(i.b)("em",{parentName:"p"},"Continue")," to the warning screen. This will bring up the ",Object(i.b)("em",{parentName:"p"},"Install")," option:"),Object(i.b)("span",{className:"gatsby-resp-image-wrapper",style:{position:"relative",display:"block",marginLeft:"auto",marginRight:"auto",maxWidth:"1152px"}},"\n      ",Object(i.b)("span",{parentName:"span",className:"gatsby-resp-image-background-image",style:{paddingBottom:"37.15277777777778%",position:"relative",bottom:"0",left:"0",backgroundImage:"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAAAsTAAALEwEAmpwYAAABpUlEQVQoz3WRTWsTURiFZ91ozTSTSZpGEQVFpNZt8UeYiWL/lCQB8R/oWnApdCVUsPkoaIxQEiM2NcZk7sykc+cj0z7eGXWnFx4u71mcc957Nf1KnrJhUCqX0XUd0zR5sLvL+PULxu239D/06LTb9LodhsfHjEcjvoyG/2Q0HKIVDJP8hkFeL7CWu8zDWo2njSZv2ie8PJixP3CRcYIIEvwEwov/AMhohVapXqNc2aK0WUFXxtajx7SePWe/P+dVd8674ZLPc8nBV4fOZEnvu8/R9C8ym1O604DxYol2d3uH7Xv3uXX7Dtdv3OTJ3h6tVosk8FSmqqRO/2fI4amkrTic+LxXHP2I+DiPGdgrBouYT+Kcb45UDbeqVKpX2axU2SgUsep1Go0GtnCIVgmJWmcqzjhR6SmTP/ep8Jl5IcKPsFNkjO2doRnFEuk7puuu5dapWRbNZhMhBEEQEMcxnuMgFnNcYWc4iqXn4i894igkWcVcnCdEYYBWNEtZs5TcpXUsq54Z2radmUZRhOu6zGazTLOV5jjqo2SAL+VvfF+Fh0qT/AKSc7HX8pfbgQAAAABJRU5ErkJggg==')",backgroundSize:"cover",display:"block"}}),"\n  ",Object(i.b)("img",{parentName:"span",className:"gatsby-resp-image-image",alt:"InstallOption",title:"InstallOption",src:"/modernization-playbook/static/4c83f024f50501f260d1512345cd6017/3cbba/InstallOption.png",srcSet:["/modernization-playbook/static/4c83f024f50501f260d1512345cd6017/7fc1e/InstallOption.png 288w","/modernization-playbook/static/4c83f024f50501f260d1512345cd6017/a5df1/InstallOption.png 576w","/modernization-playbook/static/4c83f024f50501f260d1512345cd6017/3cbba/InstallOption.png 1152w","/modernization-playbook/static/4c83f024f50501f260d1512345cd6017/0b124/InstallOption.png 1728w","/modernization-playbook/static/4c83f024f50501f260d1512345cd6017/369ed/InstallOption.png 1916w"],sizes:"(max-width: 1152px) 100vw, 1152px",style:{width:"100%",height:"100%",margin:"0",verticalAlign:"middle",position:"absolute",top:"0",left:"0"},loading:"lazy"}),"\n    "),Object(i.b)("p",null,"This is the Prometheus Operator Subscription Screen."),Object(i.b)("span",{className:"gatsby-resp-image-wrapper",style:{position:"relative",display:"block",marginLeft:"auto",marginRight:"auto",maxWidth:"1152px"}},"\n      ",Object(i.b)("span",{parentName:"span",className:"gatsby-resp-image-background-image",style:{paddingBottom:"37.15277777777778%",position:"relative",bottom:"0",left:"0",backgroundImage:"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAAAsTAAALEwEAmpwYAAABaElEQVQoz22Q20rDQBRF8x1C77a2sVRKtYgPkiaiMSD4pgh98E+1TftSf0JQes3NJE3SNLM9k14oYmAzM9kz6+xzhGI2h6Yoot5oIF8oQOp0ICs3kCQpVYfOiqJsJMvoyApu1XumaRpUVWWyLDPyUtFdJlTEOrLFMnKko0wevb6OIIwwHk8wm80wnU5hmib++djfH/7SZ8LF1TWarTYazXPU6mfo6wOEYQjHcbBerxHHMVZcqxViOi+/PmHN58y0LHiex8hn5DGiM9u2ITx3X/H00oX28AjlTsNo9IGYHnMgBwdBgCRJ9inc8TdsY4GI7vCCaVTGeWC+Twlb7Utw8YSVWh2D4ZB6YeAJeEXXddN0O6gbA5OFhWDpp0DO2vBAAQII1dMGjk/E/Qz7ug7DMWAYxh7EH27WBAntI0rO03P/EMi7EfjcSuUqiqRMvoS3915q0Hx27WzXbctRgrn1A4+SpwWo0CHwFxBMu4nZcrFuAAAAAElFTkSuQmCC')",backgroundSize:"cover",display:"block"}}),"\n  ",Object(i.b)("img",{parentName:"span",className:"gatsby-resp-image-image",alt:"PromSub",title:"PromSub",src:"/modernization-playbook/static/9c242cac44f8470a61e1cec618358daf/3cbba/OperatorSubscribe.png",srcSet:["/modernization-playbook/static/9c242cac44f8470a61e1cec618358daf/7fc1e/OperatorSubscribe.png 288w","/modernization-playbook/static/9c242cac44f8470a61e1cec618358daf/a5df1/OperatorSubscribe.png 576w","/modernization-playbook/static/9c242cac44f8470a61e1cec618358daf/3cbba/OperatorSubscribe.png 1152w","/modernization-playbook/static/9c242cac44f8470a61e1cec618358daf/0b124/OperatorSubscribe.png 1728w","/modernization-playbook/static/9c242cac44f8470a61e1cec618358daf/e68a8/OperatorSubscribe.png 1906w"],sizes:"(max-width: 1152px) 100vw, 1152px",style:{width:"100%",height:"100%",margin:"0",verticalAlign:"middle",position:"absolute",top:"0",left:"0"},loading:"lazy"}),"\n    "),Object(i.b)("p",null,"Click on ",Object(i.b)("em",{parentName:"p"},"Subscribe")," at the bottom on the screen."),Object(i.b)("span",{className:"gatsby-resp-image-wrapper",style:{position:"relative",display:"block",marginLeft:"auto",marginRight:"auto",maxWidth:"1152px"}},"\n      ",Object(i.b)("span",{parentName:"span",className:"gatsby-resp-image-background-image",style:{paddingBottom:"35.06944444444445%",position:"relative",bottom:"0",left:"0",backgroundImage:"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAAAsTAAALEwEAmpwYAAABa0lEQVQoz3WQb0vCUBTG9yEiyVzb/LO5LS3BiKAQo14EQa8Kol70qaqXqSRBEH2EoA8QBNaLECGGaZsQ6dzmtvt0N20k0oEf595znnvOw2UElsW6JKFQLIKl54woIplMgud5cBw3A8vxSKQkKLJMFEUNtITWQwRBIIwoq+DSEpKUWDyB84tLdLqfaDabMAxjil7PQLur46nxhteXRqAhmqZB1/VIw+QLa1CWVyBTFpcEXNfrCMNz8F8M+t+wbYfYtg3XdQktRTCHJ2c4Oj7F3v4BSuUd3N7d47HloqEN4Ps+PM8PcwChuPRuOS6te7/zadknQQSZ2SqVUdrexcZmCUpuFbX6DR5aPp7f+/B8Aiodv5pkmxpqffSgdzswTTNwGPUDmKySQyargk+JmIvFcVWpThZHDiLx2I6HkT2EZVnhsMAp+bOUyap5pCUFKVHG/EIClWotbI5G7vQgMv4mh+5pf1mwhubsMpp/AKZcsUf43MGqAAAAAElFTkSuQmCC')",backgroundSize:"cover",display:"block"}}),"\n  ",Object(i.b)("img",{parentName:"span",className:"gatsby-resp-image-image",alt:"Subselect",title:"Subselect",src:"/modernization-playbook/static/6c7dada6c4ea46b7945975640fe48b5d/3cbba/OpSubOrCancel.png",srcSet:["/modernization-playbook/static/6c7dada6c4ea46b7945975640fe48b5d/7fc1e/OpSubOrCancel.png 288w","/modernization-playbook/static/6c7dada6c4ea46b7945975640fe48b5d/a5df1/OpSubOrCancel.png 576w","/modernization-playbook/static/6c7dada6c4ea46b7945975640fe48b5d/3cbba/OpSubOrCancel.png 1152w","/modernization-playbook/static/6c7dada6c4ea46b7945975640fe48b5d/0b124/OpSubOrCancel.png 1728w","/modernization-playbook/static/6c7dada6c4ea46b7945975640fe48b5d/2eafe/OpSubOrCancel.png 1887w"],sizes:"(max-width: 1152px) 100vw, 1152px",style:{width:"100%",height:"100%",margin:"0",verticalAlign:"middle",position:"absolute",top:"0",left:"0"},loading:"lazy"}),"\n    "),Object(i.b)("p",null,"Now examine the ",Object(i.b)("em",{parentName:"p"},"Installed Operators")," and you will see that you now have the ",Object(i.b)("em",{parentName:"p"},"Prometheus Operator")," available:"),Object(i.b)("span",{className:"gatsby-resp-image-wrapper",style:{position:"relative",display:"block",marginLeft:"auto",marginRight:"auto",maxWidth:"1152px"}},"\n      ",Object(i.b)("span",{parentName:"span",className:"gatsby-resp-image-background-image",style:{paddingBottom:"35.416666666666664%",position:"relative",bottom:"0",left:"0",backgroundImage:"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAAAsTAAALEwEAmpwYAAABnElEQVQoz02Qa2sTQRSG9y8oXiqEXmxT09aioBS3jXsxUmiMCgr6v1TQKtT6Rey/EhQaSLPZ7M5eZnZ3Hmc2+eDAA4fhzDvPOU53q8vB7h7uUZ+1tXVc12UwGNDv9/E8D9/3CYIlpvaDkPD4RL8cjfRwONRhGNqexmJq7dzt3qOzsUVndYNrN27z4eMnlFJcjsdcTSPmSUoqMpLUIkgtSUKWZS1CCC2lpCwtJc6TI5/HBy77Dx+xvrnN2fdz7BEmJM0lcV4T5Q25bJC1pqoqlMEcveT/WjujN+95/fYdJy9eceiF/Px10XZkhURrTZZnRHFM3TTM4rmxr4xJYYIV1iwxtqqq216L4wXPCJ8fc/g0YOf+A87OfyCU5M/EjFXWpFnCJE6QVcM4Esa0Jjd3Ik0RheLvNGcqFE2zDOz29tjc7rFq9nj95gqfv5yCzLiczCkqTV4IZiI3Fg1RKtuxVWn3JyhM+Cyr289MGo0N7O3uswjd4dadDqdfv4EqGE9m5oHdlzJWqm0WRUVlTKQskWbspKj5fVUuAlkY/gNerrb3YN3jnAAAAABJRU5ErkJggg==')",backgroundSize:"cover",display:"block"}}),"\n  ",Object(i.b)("img",{parentName:"span",className:"gatsby-resp-image-image",alt:"PromOp",title:"PromOp",src:"/modernization-playbook/static/571fdf1ffbe04705c1232c184ce88007/3cbba/PromOpInstalled.png",srcSet:["/modernization-playbook/static/571fdf1ffbe04705c1232c184ce88007/7fc1e/PromOpInstalled.png 288w","/modernization-playbook/static/571fdf1ffbe04705c1232c184ce88007/a5df1/PromOpInstalled.png 576w","/modernization-playbook/static/571fdf1ffbe04705c1232c184ce88007/3cbba/PromOpInstalled.png 1152w","/modernization-playbook/static/571fdf1ffbe04705c1232c184ce88007/0b124/PromOpInstalled.png 1728w","/modernization-playbook/static/571fdf1ffbe04705c1232c184ce88007/f1ad1/PromOpInstalled.png 1903w"],sizes:"(max-width: 1152px) 100vw, 1152px",style:{width:"100%",height:"100%",margin:"0",verticalAlign:"middle",position:"absolute",top:"0",left:"0"},loading:"lazy"}),"\n    "),Object(i.b)("h4",null,"2.2.2 Install & Configure a Prometheus Instance"),Object(i.b)("p",null,"From the ",Object(i.b)("em",{parentName:"p"},"Installed Operators")," click on the ",Object(i.b)("em",{parentName:"p"},"Prometheus Operator")),Object(i.b)("span",{className:"gatsby-resp-image-wrapper",style:{position:"relative",display:"block",marginLeft:"auto",marginRight:"auto",maxWidth:"1152px"}},"\n      ",Object(i.b)("span",{parentName:"span",className:"gatsby-resp-image-background-image",style:{paddingBottom:"35.416666666666664%",position:"relative",bottom:"0",left:"0",backgroundImage:"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAAAsTAAALEwEAmpwYAAABnElEQVQoz02Qa2sTQRSG9y8oXiqEXmxT09aioBS3jXsxUmiMCgr6v1TQKtT6Rey/EhQaSLPZ7M5eZnZ3Hmc2+eDAA4fhzDvPOU53q8vB7h7uUZ+1tXVc12UwGNDv9/E8D9/3CYIlpvaDkPD4RL8cjfRwONRhGNqexmJq7dzt3qOzsUVndYNrN27z4eMnlFJcjsdcTSPmSUoqMpLUIkgtSUKWZS1CCC2lpCwtJc6TI5/HBy77Dx+xvrnN2fdz7BEmJM0lcV4T5Q25bJC1pqoqlMEcveT/WjujN+95/fYdJy9eceiF/Px10XZkhURrTZZnRHFM3TTM4rmxr4xJYYIV1iwxtqqq216L4wXPCJ8fc/g0YOf+A87OfyCU5M/EjFXWpFnCJE6QVcM4Esa0Jjd3Ik0RheLvNGcqFE2zDOz29tjc7rFq9nj95gqfv5yCzLiczCkqTV4IZiI3Fg1RKtuxVWn3JyhM+Cyr289MGo0N7O3uswjd4dadDqdfv4EqGE9m5oHdlzJWqm0WRUVlTKQskWbspKj5fVUuAlkY/gNerrb3YN3jnAAAAABJRU5ErkJggg==')",backgroundSize:"cover",display:"block"}}),"\n  ",Object(i.b)("img",{parentName:"span",className:"gatsby-resp-image-image",alt:"PromOp",title:"PromOp",src:"/modernization-playbook/static/571fdf1ffbe04705c1232c184ce88007/3cbba/PromOpInstalled.png",srcSet:["/modernization-playbook/static/571fdf1ffbe04705c1232c184ce88007/7fc1e/PromOpInstalled.png 288w","/modernization-playbook/static/571fdf1ffbe04705c1232c184ce88007/a5df1/PromOpInstalled.png 576w","/modernization-playbook/static/571fdf1ffbe04705c1232c184ce88007/3cbba/PromOpInstalled.png 1152w","/modernization-playbook/static/571fdf1ffbe04705c1232c184ce88007/0b124/PromOpInstalled.png 1728w","/modernization-playbook/static/571fdf1ffbe04705c1232c184ce88007/f1ad1/PromOpInstalled.png 1903w"],sizes:"(max-width: 1152px) 100vw, 1152px",style:{width:"100%",height:"100%",margin:"0",verticalAlign:"middle",position:"absolute",top:"0",left:"0"},loading:"lazy"}),"\n    "),Object(i.b)("p",null,"This will bring up the ",Object(i.b)("em",{parentName:"p"},"Prometheus Operator")," screen. Click on ",Object(i.b)("em",{parentName:"p"},"Create Instance")),Object(i.b)("span",{className:"gatsby-resp-image-wrapper",style:{position:"relative",display:"block",marginLeft:"auto",marginRight:"auto",maxWidth:"1152px"}},"\n      ",Object(i.b)("span",{parentName:"span",className:"gatsby-resp-image-background-image",style:{paddingBottom:"32.29166666666667%",position:"relative",bottom:"0",left:"0",backgroundImage:"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAAAsTAAALEwEAmpwYAAABM0lEQVQY03VR20oDMRTcjyhULBRqa9cuWysFEbHe8EUQBEEU+mPFJ60KXr+qT7axu7qbbJq9ZEwOrdQHB4aEOedMhhPHbflYW3dRqzdRWqngZjBAHjB8jMdgjIFzDinlv0wSywRhGEIIAae708Nmdxt+p2uMNzC8f0Smga9YkFkUx/PBhAY4F3S3p9UXp63Fpt+5uOrj8rqP07Nz7B0c4+XtHULOKKFSCmmaEjPLLCMuNMsoiqgvz3OqOT1jsn90gt3eIbz2Fp6eX1EACIIQWpuoc0RKgwuJ1AwvIwgCSreA43o+Gq6Haq2BUnkVt3fDP402hQUzD4xGI7DJBNPplFKRzj4Rm7VY2ACO1+6QYb3ZQrlSNTt8oKJUGYqlhHKmzCoUaVoXv+m/ufmQ2OxQFchyjR9pC5VeV0I2BwAAAABJRU5ErkJggg==')",backgroundSize:"cover",display:"block"}}),"\n  ",Object(i.b)("img",{parentName:"span",className:"gatsby-resp-image-image",alt:"CreateProm",title:"CreateProm",src:"/modernization-playbook/static/4471fe025c16f429efa7fc54f0982f0c/3cbba/PromCreate.png",srcSet:["/modernization-playbook/static/4471fe025c16f429efa7fc54f0982f0c/7fc1e/PromCreate.png 288w","/modernization-playbook/static/4471fe025c16f429efa7fc54f0982f0c/a5df1/PromCreate.png 576w","/modernization-playbook/static/4471fe025c16f429efa7fc54f0982f0c/3cbba/PromCreate.png 1152w","/modernization-playbook/static/4471fe025c16f429efa7fc54f0982f0c/0b124/PromCreate.png 1728w","/modernization-playbook/static/4471fe025c16f429efa7fc54f0982f0c/12611/PromCreate.png 1898w"],sizes:"(max-width: 1152px) 100vw, 1152px",style:{width:"100%",height:"100%",margin:"0",verticalAlign:"middle",position:"absolute",top:"0",left:"0"},loading:"lazy"}),"\n    "),Object(i.b)("p",null,"and you will see the ",Object(i.b)("em",{parentName:"p"},"Create")," selection"),Object(i.b)("span",{className:"gatsby-resp-image-wrapper",style:{position:"relative",display:"block",marginLeft:"auto",marginRight:"auto",maxWidth:"1152px"}},"\n      ",Object(i.b)("span",{parentName:"span",className:"gatsby-resp-image-background-image",style:{paddingBottom:"31.25%",position:"relative",bottom:"0",left:"0",backgroundImage:"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAAAsTAAALEwEAmpwYAAABTElEQVQY05WQzUoCARRG5yGCwWEc86cmdcRSqMisaBUEQUgRaPZKUosoKoKoTbVu0xO0aFPMjD9jarQpi9DQMarTNIs2tunC4YPL5cB3BTWsERgawR9SGRAl9vYP+AKenl9ptVq0221su0uv1+vDtu1f3jpdOl0bITmZJp4YJzaadMVHxye8f3zy2Hyh2WzScQ7/M8LyapaVtSwLi0ukZuY5PTt3RbphUiwWsSyDSsWgXDYwDB1d1500XEzTpFwqYZhFrm9M7hr3CKn0HNOz80xMpdHiCbZ3dlnKrBGIjhLTfAT9HhRFwucgSf14PB43RVEkt55DGA5HCalhFH8IUfJS2Nwis+IIVY1ILIYalBn0yciyF6/3bxRFcaUb+TyCFh9zhBH3f5LsY3vvkMJFlcsrp2q1RqNeoV6zqFYtp34/P/tyxeL6tuRUfuAbOMZBwWVu9QkAAAAASUVORK5CYII=')",backgroundSize:"cover",display:"block"}}),"\n  ",Object(i.b)("img",{parentName:"span",className:"gatsby-resp-image-image",alt:"PromConfig",title:"PromConfig",src:"/modernization-playbook/static/1398c029f269df42df984e681be03d99/3cbba/PromConfig.png",srcSet:["/modernization-playbook/static/1398c029f269df42df984e681be03d99/7fc1e/PromConfig.png 288w","/modernization-playbook/static/1398c029f269df42df984e681be03d99/a5df1/PromConfig.png 576w","/modernization-playbook/static/1398c029f269df42df984e681be03d99/3cbba/PromConfig.png 1152w","/modernization-playbook/static/1398c029f269df42df984e681be03d99/0b124/PromConfig.png 1728w","/modernization-playbook/static/1398c029f269df42df984e681be03d99/1055c/PromConfig.png 1900w"],sizes:"(max-width: 1152px) 100vw, 1152px",style:{width:"100%",height:"100%",margin:"0",verticalAlign:"middle",position:"absolute",top:"0",left:"0"},loading:"lazy"}),"\n    "),Object(i.b)("p",null,"Copy the contents of the ",Object(i.b)("em",{parentName:"p"},"PromConfigNames.yaml")," file into the selection  area of the screen and click on ",Object(i.b)("em",{parentName:"p"},"Create"),". This will instantiate prometheus in your namespace (this yaml will need to be customized for a production installation, for example to control storage usage, you can find the options at ",Object(i.b)("a",{parentName:"p",href:"https://github.com/coreos/prometheus-operator/blob/master/Documentation/api.md"},"https://github.com/coreos/prometheus-operator/blob/master/Documentation/api.md"),")."),Object(i.b)("p",null,"Verify the Prometheus Service is running:"),Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre"},"oc get svc -n prometheus-test\n")),Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre"},"NAME                  TYPE        CLUSTER-IP   EXTERNAL-IP   PORT(S)    AGE\nprometheus-operated   ClusterIP   None         <none>        9090/TCP   4m54s\n")),Object(i.b)("p",null,"Expose the ",Object(i.b)("em",{parentName:"p"},"prometheus-operated")," service externally:"),Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre"},"oc expose svc/prometheus-operated -n prometheus-test\n")),Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre"},"\n13. Confirm the external route:\n")),Object(i.b)("p",null,"oc get routes -n prometheus-test"),Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre"},"route.route.openshift.io/prometheus-operated exposed\n")),Object(i.b)("p",null,"Now go to your project dashboard page and scroll down to the Deployments area."),Object(i.b)("span",{className:"gatsby-resp-image-wrapper",style:{position:"relative",display:"block",marginLeft:"auto",marginRight:"auto",maxWidth:"1152px"}},"\n      ",Object(i.b)("span",{parentName:"span",className:"gatsby-resp-image-background-image",style:{paddingBottom:"31.25%",position:"relative",bottom:"0",left:"0",backgroundImage:"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAw0lEQVQY051QXQvBYBjdj3BBFCWirZXFspQso/lqIj9suEA+f6AM72zeVzv2Trk2p85zc06ncx5BqdXBKcoVpDJZ2IslEAS4Og4YY6CU/kTuJYRAMPoW9I6Jpm5AUTVsd3twXMgTceH7PgRrMsNoPEW3N0SjqeNwPH1E+gpvEJb9jd/AjjlAq939NAyn7/YH8Cji0cgUO1DVGqiGU3lYoSRhtd5E4t1j/00uiTKKZQm5fBGJZBr2fBGJ59sjenQcuq6LN2t7nEcRkyieAAAAAElFTkSuQmCC')",backgroundSize:"cover",display:"block"}}),"\n  ",Object(i.b)("img",{parentName:"span",className:"gatsby-resp-image-image",alt:"PromDeploy",title:"PromDeploy",src:"/modernization-playbook/static/a4b130ac37944652e4df6c70d0eff803/3cbba/PromDeployment.png",srcSet:["/modernization-playbook/static/a4b130ac37944652e4df6c70d0eff803/7fc1e/PromDeployment.png 288w","/modernization-playbook/static/a4b130ac37944652e4df6c70d0eff803/a5df1/PromDeployment.png 576w","/modernization-playbook/static/a4b130ac37944652e4df6c70d0eff803/3cbba/PromDeployment.png 1152w","/modernization-playbook/static/a4b130ac37944652e4df6c70d0eff803/0b124/PromDeployment.png 1728w","/modernization-playbook/static/a4b130ac37944652e4df6c70d0eff803/12611/PromDeployment.png 1898w"],sizes:"(max-width: 1152px) 100vw, 1152px",style:{width:"100%",height:"100%",margin:"0",verticalAlign:"middle",position:"absolute",top:"0",left:"0"},loading:"lazy"}),"\n    "),Object(i.b)("p",null,"Click on the ",Object(i.b)("em",{parentName:"p"},"Route")," option"),Object(i.b)("span",{className:"gatsby-resp-image-wrapper",style:{position:"relative",display:"block",marginLeft:"auto",marginRight:"auto",maxWidth:"1152px"}},"\n      ",Object(i.b)("span",{parentName:"span",className:"gatsby-resp-image-background-image",style:{paddingBottom:"34.02777777777777%",position:"relative",bottom:"0",left:"0",backgroundImage:"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAAAsTAAALEwEAmpwYAAABQklEQVQoz51RTU7CUBDuFVCJrAVKixjvod5EAmjQW5gQI6vaXsWNR3Dl0oBEMVqgj77/z+lrFBMXJk4ymcl7M9/3zYznByHqDR/b1V0cHZ8guk1wNbrGzXiMKIoQxwniJHExSf52L+wcotU+QGWnhuHFJe6nwOjuA8zgX+Y1g33sNQNsVWs47faQKuBhkmK64HhecszIUyawWksIqaDUxqWUkEq6nDEGzjm8VthB3Q8dYLc3cCyrXEBog1wZLBkHp0YhqJFiYcZYSFHkFInEGPPtXqPVdoAVAuz3BxBUNl8SoLKkSOBpNkEuDDIimS9yKF0Acrymb+A0zSpLkbHMEVlry5G/FPYGZ+6DE6smFQXjWpSq3pnG4wutIZXuPaeagtTaUlkB5gADOsgG8Nw1a63dOD9N0goY12BCO7LS7K+jfAJvntJQPiE5LQAAAABJRU5ErkJggg==')",backgroundSize:"cover",display:"block"}}),"\n  ",Object(i.b)("img",{parentName:"span",className:"gatsby-resp-image-image",alt:"PromRoute",title:"PromRoute",src:"/modernization-playbook/static/384bee795b4cbc2ac71de50604cdc416/3cbba/PromRoute.png",srcSet:["/modernization-playbook/static/384bee795b4cbc2ac71de50604cdc416/7fc1e/PromRoute.png 288w","/modernization-playbook/static/384bee795b4cbc2ac71de50604cdc416/a5df1/PromRoute.png 576w","/modernization-playbook/static/384bee795b4cbc2ac71de50604cdc416/3cbba/PromRoute.png 1152w","/modernization-playbook/static/384bee795b4cbc2ac71de50604cdc416/0b124/PromRoute.png 1728w","/modernization-playbook/static/384bee795b4cbc2ac71de50604cdc416/2eafe/PromRoute.png 1887w"],sizes:"(max-width: 1152px) 100vw, 1152px",style:{width:"100%",height:"100%",margin:"0",verticalAlign:"middle",position:"absolute",top:"0",left:"0"},loading:"lazy"}),"\n    "),Object(i.b)("p",null,"Now click on the URL under the ",Object(i.b)("em",{parentName:"p"},"Location")," header to open a new window for the Prometheus console"),Object(i.b)("span",{className:"gatsby-resp-image-wrapper",style:{position:"relative",display:"block",marginLeft:"auto",marginRight:"auto",maxWidth:"1152px"}},"\n      ",Object(i.b)("span",{parentName:"span",className:"gatsby-resp-image-background-image",style:{paddingBottom:"41.31944444444445%",position:"relative",bottom:"0",left:"0",backgroundImage:"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAAAsTAAALEwEAmpwYAAAApElEQVQoz62RUQrCMBBEc/8/Y4InETyF9AKiWPSjHwURm802yZiNKFJsC8WBB5vdzWQgamM01noFYwystQWptdaLUOeW8OCEf0lt9zUO1xZMDp1zICKEEBaj2FM2cYgpIcZYmqKUz0Nk/qsvvJSyIXWlkOUp5BIzlwff5t9wH9BLwl11QXVqR1MNU4zNfDb0fYQ6Nnc0N/dZntLcvHzKcHku5RxPe7Jfe2fx7d0AAAAASUVORK5CYII=')",backgroundSize:"cover",display:"block"}}),"\n  ",Object(i.b)("img",{parentName:"span",className:"gatsby-resp-image-image",alt:"Promcon",title:"Promcon",src:"/modernization-playbook/static/68118f76218ae007be1156b303c0f65d/3cbba/PromConsole.png",srcSet:["/modernization-playbook/static/68118f76218ae007be1156b303c0f65d/7fc1e/PromConsole.png 288w","/modernization-playbook/static/68118f76218ae007be1156b303c0f65d/a5df1/PromConsole.png 576w","/modernization-playbook/static/68118f76218ae007be1156b303c0f65d/3cbba/PromConsole.png 1152w","/modernization-playbook/static/68118f76218ae007be1156b303c0f65d/0b124/PromConsole.png 1728w","/modernization-playbook/static/68118f76218ae007be1156b303c0f65d/210a0/PromConsole.png 1912w"],sizes:"(max-width: 1152px) 100vw, 1152px",style:{width:"100%",height:"100%",margin:"0",verticalAlign:"middle",position:"absolute",top:"0",left:"0"},loading:"lazy"}),"\n    "),Object(i.b)("p",null,"Prometheus has been installed and is running although as yet it hasn’t found any applications to monitor."),Object(i.b)("h2",null,"3 Deploy an app via the Open Liberty Operator"),Object(i.b)("p",null,"So far we have not created any monitoring targets for Prometheus.  Note that the Prometheus we installed earlier is managed by the Prometheus operator, and the latter will monitor for ServiceMonitor CRD instances to identify monitoring targets.  "),Object(i.b)("h3",null,"3.1 Create a new project for the test application"),Object(i.b)("p",null,"Create a new project to hold your application. Note that we are now working in the ",Object(i.b)("em",{parentName:"p"},"dev-test")," namespace."),Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre"},"oc new-project dev-test\n")),Object(i.b)("h3",null,"3.2 Install the Open Liberty Operator"),Object(i.b)("p",null,"Install the Open Liberty operator from the Operator Hub or Installed Operators as you did for the Prometheus Operator."),Object(i.b)("p",null,"The documentation for the ",Object(i.b)("em",{parentName:"p"},"Open Liberty Operator")," can be found at:"),Object(i.b)("p",null,Object(i.b)("a",{parentName:"p",href:"https://github.com/OpenLiberty/open-liberty-operator/blob/master/doc/user-guide.md"},"https://github.com/OpenLiberty/open-liberty-operator/blob/master/doc/user-guide.md")),Object(i.b)("span",{className:"gatsby-resp-image-wrapper",style:{position:"relative",display:"block",marginLeft:"auto",marginRight:"auto",maxWidth:"1152px"}},"\n      ",Object(i.b)("span",{parentName:"span",className:"gatsby-resp-image-background-image",style:{paddingBottom:"31.59722222222222%",position:"relative",bottom:"0",left:"0",backgroundImage:"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAAAsTAAALEwEAmpwYAAAA9UlEQVQY042QWWvCUBCF8yfEUlFatS61uCAIFkVB8EEQfKog9qW/sCYuCKL/xCr4lkCIkOUmuTn1jiiCVXrgcBdmPs6MVCxXkMuXkH0rIPachDKbQ8hxHARBQKfnefQn3rd86pE+hl/oDz7R6fbQbLWxWK7AXBeGYZyBlmWBc06+BfN9H7quQ6rWGnivN1Gp1ijleDKFfQCYpkmFjLn/Tih6pEwuj2T6FU+JFEIPEXyPZEolLPSz3WCzW9OdB/zcfKkrYCKVJYcfoxjJCo2oaRoV2bYNVVVpnHtJr4DxlwwBZWV83NsBJLTfGwRjjNGeLoF/JfwFt5WaN/PqQ6wAAAAASUVORK5CYII=')",backgroundSize:"cover",display:"block"}}),"\n  ",Object(i.b)("img",{parentName:"span",className:"gatsby-resp-image-image",alt:"Libhub",title:"Libhub",src:"/modernization-playbook/static/eea1a9a5fbbd45e76dd731f83348d0ab/3cbba/LibertyOpHub.png",srcSet:["/modernization-playbook/static/eea1a9a5fbbd45e76dd731f83348d0ab/7fc1e/LibertyOpHub.png 288w","/modernization-playbook/static/eea1a9a5fbbd45e76dd731f83348d0ab/a5df1/LibertyOpHub.png 576w","/modernization-playbook/static/eea1a9a5fbbd45e76dd731f83348d0ab/3cbba/LibertyOpHub.png 1152w","/modernization-playbook/static/eea1a9a5fbbd45e76dd731f83348d0ab/0b124/LibertyOpHub.png 1728w","/modernization-playbook/static/eea1a9a5fbbd45e76dd731f83348d0ab/e68a8/LibertyOpHub.png 1906w"],sizes:"(max-width: 1152px) 100vw, 1152px",style:{width:"100%",height:"100%",margin:"0",verticalAlign:"middle",position:"absolute",top:"0",left:"0"},loading:"lazy"}),"\n    "),Object(i.b)("p",null,"Should you need to debug the  Open Liberty operator deployment, you can watch the operator logs that show the deployment activity."),Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre"}," oc get pods -A |grep liberty\n")),Object(i.b)("p",null," The response will look like:"),Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre"},"openshift-operators  open-liberty-operator-847d9d76c4-gt24z 1/1\n")),Object(i.b)("p",null,"Then take the name of the open-liberty-operator pod from the openshift-operators namespace and plug it into the logs command:"),Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre"}," oc logs  open-liberty-operator-847d9d76c4-gt24z -f -n openshift-operators\n")),Object(i.b)("p",null,"Note: the response is not shown here because it is extensive. (ctl-c to end the output in a linux terminal)"),Object(i.b)("h3",null,"3.3 Create an Open Liberty Application"),Object(i.b)("p",null,"Once available the ",Object(i.b)("em",{parentName:"p"},"Installed Operators")," option in your project will show it."),Object(i.b)("span",{className:"gatsby-resp-image-wrapper",style:{position:"relative",display:"block",marginLeft:"auto",marginRight:"auto",maxWidth:"1152px"}},"\n      ",Object(i.b)("span",{parentName:"span",className:"gatsby-resp-image-background-image",style:{paddingBottom:"31.25%",position:"relative",bottom:"0",left:"0",backgroundImage:"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAAAsTAAALEwEAmpwYAAABNklEQVQY002R60rDMBTH+wzCYKIi6ubm5nQogiIOx0BBEARR2KOpcwrqB9Fn8tuQdaU1S9q0aZK/SXSXwOFcwvmdm9c8OEKjuY9ao4mVtRL6T8+QUsL3fRBCkOc57NNaY/5ZfxKb2Fa8q5surm+7OL+4xOFxC+8fnw4YBAHCMETCufMteF6UUk4mtoVZ7bXaHbQ7Zzg57WB7dw8vr2+uKiFj/DCOEUnxHaUgsQBNhCuQJIkByTmgngErtQbK1TpW18tYKBRxd//ggGkmnLYJjDGXEBttfSGE61opaWLU2LO1eNX6DjY2t5wUFpcNsAfGY3wNCSiXoDGBH0XIpcYgoEgyDWZilI6R5QqDMMWQCPNvxrYdWmCpUvsDFpfQe+y7avx/d9NjGC2Vno6ntXI+SyW4UNOj/ALCbZeGnI3JlAAAAABJRU5ErkJggg==')",backgroundSize:"cover",display:"block"}}),"\n  ",Object(i.b)("img",{parentName:"span",className:"gatsby-resp-image-image",alt:"libopin",title:"libopin",src:"/modernization-playbook/static/055a47516f7a1a4547061f1b8b21407f/3cbba/LibOpInstalled.png",srcSet:["/modernization-playbook/static/055a47516f7a1a4547061f1b8b21407f/7fc1e/LibOpInstalled.png 288w","/modernization-playbook/static/055a47516f7a1a4547061f1b8b21407f/a5df1/LibOpInstalled.png 576w","/modernization-playbook/static/055a47516f7a1a4547061f1b8b21407f/3cbba/LibOpInstalled.png 1152w","/modernization-playbook/static/055a47516f7a1a4547061f1b8b21407f/0b124/LibOpInstalled.png 1728w","/modernization-playbook/static/055a47516f7a1a4547061f1b8b21407f/cdea7/LibOpInstalled.png 1894w"],sizes:"(max-width: 1152px) 100vw, 1152px",style:{width:"100%",height:"100%",margin:"0",verticalAlign:"middle",position:"absolute",top:"0",left:"0"},loading:"lazy"}),"\n    "),Object(i.b)("p",null,"Select the Open Liberty Operator to open it"),Object(i.b)("span",{className:"gatsby-resp-image-wrapper",style:{position:"relative",display:"block",marginLeft:"auto",marginRight:"auto",maxWidth:"1152px"}},"\n      ",Object(i.b)("span",{parentName:"span",className:"gatsby-resp-image-background-image",style:{paddingBottom:"31.59722222222222%",position:"relative",bottom:"0",left:"0",backgroundImage:"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAAAsTAAALEwEAmpwYAAABPUlEQVQY041Q20rDQBDNPwiKooi1NW1trVXwQamXIgiCDyIU9O/aqigi/pRo06TJ5rJNstvscXZb0EcPHHbODHNmZq320TGa+4fY3Wtjq2yjPxwiShhc18XE9yGEwH+Q5zmKooB123vAXe8eV9c3ODm9wNv7B7gEwpgjjiNEcYzpdArOOZJEMzE6pryupWlqdBiG5rU6512cdS+NWaN1gOeXVwhZwPUmkFKayRlxJnLSwmiTyzJjpo11rC/RtOx6E2W7js1SBUsra+j3B0gV4Iw9ZNQgyFQjygGe5hBk9hdhGNGA32+xao0WtndqhsurGxg+PiGlwufXNxxnhIAxQBVwGMeYtmYsMGfr/9KYeB6CwKdIzQ2riw1LlSoZrmNAhhos4rTdzMRKKTpbIpNq0TbPaXg0aBRw+ImuF/gBiXqWPakcPGkAAAAASUVORK5CYII=')",backgroundSize:"cover",display:"block"}}),"\n  ",Object(i.b)("img",{parentName:"span",className:"gatsby-resp-image-image",alt:"opliberty",title:"opliberty",src:"/modernization-playbook/static/f86e084d97536210231f0a673372fe18/3cbba/OpLiberty.png",srcSet:["/modernization-playbook/static/f86e084d97536210231f0a673372fe18/7fc1e/OpLiberty.png 288w","/modernization-playbook/static/f86e084d97536210231f0a673372fe18/a5df1/OpLiberty.png 576w","/modernization-playbook/static/f86e084d97536210231f0a673372fe18/3cbba/OpLiberty.png 1152w","/modernization-playbook/static/f86e084d97536210231f0a673372fe18/0b124/OpLiberty.png 1728w","/modernization-playbook/static/f86e084d97536210231f0a673372fe18/10110/OpLiberty.png 1889w"],sizes:"(max-width: 1152px) 100vw, 1152px",style:{width:"100%",height:"100%",margin:"0",verticalAlign:"middle",position:"absolute",top:"0",left:"0"},loading:"lazy"}),"\n    "),Object(i.b)("p",null,"In the ",Object(i.b)("em",{parentName:"p"},"Open Liberty Application")," area select ",Object(i.b)("em",{parentName:"p"},"Create Instance")),Object(i.b)("span",{className:"gatsby-resp-image-wrapper",style:{position:"relative",display:"block",marginLeft:"auto",marginRight:"auto",maxWidth:"1152px"}},"\n      ",Object(i.b)("span",{parentName:"span",className:"gatsby-resp-image-background-image",style:{paddingBottom:"31.25%",position:"relative",bottom:"0",left:"0",backgroundImage:"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAAAsTAAALEwEAmpwYAAABgElEQVQY042QS2sTYRiFv0nBSjEIgdTSSrXaSrz0ashMQkJzwQtCVayQ2Kb5BV100T8hUurClVZX6kaQbrrpIjOJtSLtuhuzciGxYTqZCDGTiT5+ThYibjzwcM57OKtXXNXiTIVVJqbDnD1/gafPNvgty/5Gq+VIvtNsNnEch06n8w+u60p3aTltWm0XcXs+y/3sAjduzaHGErx89ZofP6FmWliWTa1mUq0e0pbj/5FIJNMkM9eJz6a5PDHNxvMXfKpU0Etl3u8YfPyge+y80ykWi39hGAblchndKLG1rbO7v4e4eGWS0KVxzo2FCA4Msbb+mMzNOfoCgwT7/fQHBH5/D73HfPh8XRTljyuK4mUhBDPhGcTwyCgDp89wamiY4ydO8vDRGssrq8SS15hNpYjHIkQiGqqqomkq0agmicqseXfXNbmJUCgUEA/yBXILeXKLS9y5e483bzd5oh+ye/AFq257NBpdbNvGNE351xp2vS67htfX5eZz9YivRw1+AbRVQsx0T92QAAAAAElFTkSuQmCC')",backgroundSize:"cover",display:"block"}}),"\n  ",Object(i.b)("img",{parentName:"span",className:"gatsby-resp-image-image",alt:"libcreate",title:"libcreate",src:"/modernization-playbook/static/22aed9f2fa8b9bada13eb6c306ed012d/3cbba/LibertyCreate.png",srcSet:["/modernization-playbook/static/22aed9f2fa8b9bada13eb6c306ed012d/7fc1e/LibertyCreate.png 288w","/modernization-playbook/static/22aed9f2fa8b9bada13eb6c306ed012d/a5df1/LibertyCreate.png 576w","/modernization-playbook/static/22aed9f2fa8b9bada13eb6c306ed012d/3cbba/LibertyCreate.png 1152w","/modernization-playbook/static/22aed9f2fa8b9bada13eb6c306ed012d/0b124/LibertyCreate.png 1728w","/modernization-playbook/static/22aed9f2fa8b9bada13eb6c306ed012d/cdea7/LibertyCreate.png 1894w"],sizes:"(max-width: 1152px) 100vw, 1152px",style:{width:"100%",height:"100%",margin:"0",verticalAlign:"middle",position:"absolute",top:"0",left:"0"},loading:"lazy"}),"\n    "),Object(i.b)("p",null,"Now copy the contents of the ",Object(i.b)("em",{parentName:"p"},"openl.yaml")," file into the screen for the new application and click on ",Object(i.b)("em",{parentName:"p"},"Create")),Object(i.b)("span",{className:"gatsby-resp-image-wrapper",style:{position:"relative",display:"block",marginLeft:"auto",marginRight:"auto",maxWidth:"1152px"}},"\n      ",Object(i.b)("span",{parentName:"span",className:"gatsby-resp-image-background-image",style:{paddingBottom:"37.15277777777778%",position:"relative",bottom:"0",left:"0",backgroundImage:"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAAAsTAAALEwEAmpwYAAABhElEQVQoz32QX0vCYBjFd99FEARuc1lqoZZaREEYuNI521qJVFCfKIr6BKGEFBF9hqDboC6CNt2SisJCr+2f+JzeVVIR9MCPc56L5/Cel5O8XkT8AcTio5CkPiQSCWRVFTOyDEVRoDLvkslkPlAYqqbDMAxiIJ1OkyzLJCeTlErNEhcfn0Q4Noah8Ah4qR87hSLcaT6/gpgSEdrtNv4Z+rlwWm4F+kIeqcwcJqamUdrbx8tbC7XHOur1Bmq1B9zd3aPZfPovjDpwSlaHZiwirWoYZa8tFHfRaDRwaVqo2BVUryxcuTgWTNP8Rblchm3bsMoVnF9YcK5vwIWGo8Tqkn8wRL0ekTa3tim3vEaB4TGKjvgpGhEQDnmp3ydCFEX6ouMhCILrwfM8dEMHx4LQNxCEwP6vq7sH6xubyC2twjcYgT8YhE/iyT3ieYFEpsInJHz7z0CPB/M6C8xqRsvFyOUppah0cHjULp1c0/GpSRWnSm4lx3GI0dE/3rYdnF2w+tVbvAN1cWTHXLZyiQAAAABJRU5ErkJggg==')",backgroundSize:"cover",display:"block"}}),"\n  ",Object(i.b)("img",{parentName:"span",className:"gatsby-resp-image-image",alt:"openlyaml",title:"openlyaml",src:"/modernization-playbook/static/8fa6d1691622ab0e2f2e6d3a028f5ee4/3cbba/openlyaml.png",srcSet:["/modernization-playbook/static/8fa6d1691622ab0e2f2e6d3a028f5ee4/7fc1e/openlyaml.png 288w","/modernization-playbook/static/8fa6d1691622ab0e2f2e6d3a028f5ee4/a5df1/openlyaml.png 576w","/modernization-playbook/static/8fa6d1691622ab0e2f2e6d3a028f5ee4/3cbba/openlyaml.png 1152w","/modernization-playbook/static/8fa6d1691622ab0e2f2e6d3a028f5ee4/0b124/openlyaml.png 1728w","/modernization-playbook/static/8fa6d1691622ab0e2f2e6d3a028f5ee4/cc56e/openlyaml.png 1891w"],sizes:"(max-width: 1152px) 100vw, 1152px",style:{width:"100%",height:"100%",margin:"0",verticalAlign:"middle",position:"absolute",top:"0",left:"0"},loading:"lazy"}),"\n    "),Object(i.b)("p",null,"Now go back to the dev-test project dashboard and scroll down to the deployments selection to view your deployed application"),Object(i.b)("span",{className:"gatsby-resp-image-wrapper",style:{position:"relative",display:"block",marginLeft:"auto",marginRight:"auto",maxWidth:"1152px"}},"\n      ",Object(i.b)("span",{parentName:"span",className:"gatsby-resp-image-background-image",style:{paddingBottom:"36.80555555555556%",position:"relative",bottom:"0",left:"0",backgroundImage:"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAAAsTAAALEwEAmpwYAAABMUlEQVQoz5WR30rDMBTG+xzipptWGDi32bnqhLI5DYz+0dm+jXsQUTfUJ/FC8EakYrH0FXYjKKV1TfOZBOeFin8++DhJTnLOjxOlWFxAVVWxVm9gvlCEYRhwXReWZcG27a92HDiDQ3iex97vMUKItGmaTFnf2EStqaOyWsNcoYTjk1MIZVmGP4h9PlCIeYAe6aOzs4em3sbZaIycJ55eUuR5/pPZLFJKxZrFccwUZ8Cx9wcgfQvbRhfnF5ey0+uUSgDGfrWQfJMkCSfsm+j0CIzuLrTWFkbjMaY8+Ryn4G1BJQUFp5BkIn5X+KOgKKK12qhrOspqRRaUM8T/laYplGqtgfLyCkpLKgqLZRwNh7i9u8fV9Q3C8BFRFCEIAu4Hvg/h+z4mk4mkEh83syDnM8QbeT28roI819oAAAAASUVORK5CYII=')",backgroundSize:"cover",display:"block"}}),"\n  ",Object(i.b)("img",{parentName:"span",className:"gatsby-resp-image-image",alt:"openldeply",title:"openldeply",src:"/modernization-playbook/static/262cd4dac20fe97393866c6071760978/3cbba/openldeployed.png",srcSet:["/modernization-playbook/static/262cd4dac20fe97393866c6071760978/7fc1e/openldeployed.png 288w","/modernization-playbook/static/262cd4dac20fe97393866c6071760978/a5df1/openldeployed.png 576w","/modernization-playbook/static/262cd4dac20fe97393866c6071760978/3cbba/openldeployed.png 1152w","/modernization-playbook/static/262cd4dac20fe97393866c6071760978/0b124/openldeployed.png 1728w","/modernization-playbook/static/262cd4dac20fe97393866c6071760978/1d795/openldeployed.png 1902w"],sizes:"(max-width: 1152px) 100vw, 1152px",style:{width:"100%",height:"100%",margin:"0",verticalAlign:"middle",position:"absolute",top:"0",left:"0"},loading:"lazy"}),"\n    "),Object(i.b)("p",null,"The ",Object(i.b)("em",{parentName:"p"},"Route")," will point to the application"),Object(i.b)("span",{className:"gatsby-resp-image-wrapper",style:{position:"relative",display:"block",marginLeft:"auto",marginRight:"auto",maxWidth:"1152px"}},"\n      ",Object(i.b)("span",{parentName:"span",className:"gatsby-resp-image-background-image",style:{paddingBottom:"36.80555555555556%",position:"relative",bottom:"0",left:"0",backgroundImage:"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAAAsTAAALEwEAmpwYAAABUklEQVQoz42QyU4CQRCG5xUwGjkNBwWEQRY1XvBG4DAgKjyVUVk0PhvxYuJCHMMizAzMXr9dbVQ0HqzkS6/1dXUpCVVFbjuJQrEEVU2gXD5Cs9lEtVqFXq+j0Wj8oC44PjnFWatF7XYbuq5TpVIhcZ9qtRopWmEPudIB0tldxDbi6N/c4tUHBoaHfwT93lBSmRyS6Sy2UhnE1jdxfnGJpTi4H1kYzl08C15MD+bSh+34CIJAEoYhCXjOI3meR7Ztk7Kj5WV1UigqvOr05EucHBLB9QPMLRtRFMFzXTlyCIGE147jgMRdRgq/K4yj0+uDP7t0fZloLUwYkzFC4Xk0phiO5jAXHiznDY7PwhCz+ZQr/hAmdzQpY9ZEhV0h5OBv0UqHoogweBjh7mkspKZM/isULV9Ecf8Q3EvuYbd3vSKkLyKBMbEwsxwsRDv4gdXzT94BIYK2l3c61pcAAAAASUVORK5CYII=')",backgroundSize:"cover",display:"block"}}),"\n  ",Object(i.b)("img",{parentName:"span",className:"gatsby-resp-image-image",alt:"olroute",title:"olroute",src:"/modernization-playbook/static/7d974198a1206aa2143ca1aa19471228/3cbba/olroute.png",srcSet:["/modernization-playbook/static/7d974198a1206aa2143ca1aa19471228/7fc1e/olroute.png 288w","/modernization-playbook/static/7d974198a1206aa2143ca1aa19471228/a5df1/olroute.png 576w","/modernization-playbook/static/7d974198a1206aa2143ca1aa19471228/3cbba/olroute.png 1152w","/modernization-playbook/static/7d974198a1206aa2143ca1aa19471228/0b124/olroute.png 1728w","/modernization-playbook/static/7d974198a1206aa2143ca1aa19471228/0e2a6/olroute.png 1888w"],sizes:"(max-width: 1152px) 100vw, 1152px",style:{width:"100%",height:"100%",margin:"0",verticalAlign:"middle",position:"absolute",top:"0",left:"0"},loading:"lazy"}),"\n    "),Object(i.b)("p",null,"Click on the URL to view the application"),Object(i.b)("span",{className:"gatsby-resp-image-wrapper",style:{position:"relative",display:"block",marginLeft:"auto",marginRight:"auto",maxWidth:"1152px"}},"\n      ",Object(i.b)("span",{parentName:"span",className:"gatsby-resp-image-background-image",style:{paddingBottom:"33.33333333333333%",position:"relative",bottom:"0",left:"0",backgroundImage:"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAAAsTAAALEwEAmpwYAAABA0lEQVQoz32R2W6EMAxF+f9v46EjQGKZh3mAkdgHQkjCdmubUnWktpaOvMSOrhMvCALEcYw0TZEkCaIoAteyLIPv+7jdPhCGIZxz2LYN67qKv+KLfd/B5k3TJAVrrQwxy7JQbiTmM86NMdBag/svlFIYx1E898iFVVWi77vvZvZaO4pBcE29XTTPM/4zL8seuN8fMszNrNRaR5wqWZkxVmDFfP5zXVbGXE/h5fmAolDI8wrPZ0Fqe7xeA7pOU8y0FDdU62STtuW8wzAMopzXZS71HjeftKjrWpqbpkdZKsodeYuqmglDQ0ZUs8o/V962HSfnz/FvnX79iiHQRm92HMevfALnKxxDBLVkxwAAAABJRU5ErkJggg==')",backgroundSize:"cover",display:"block"}}),"\n  ",Object(i.b)("img",{parentName:"span",className:"gatsby-resp-image-image",alt:"olapp",title:"olapp",src:"/modernization-playbook/static/a0d98298f4a7cd804e10faa8469f53f5/3cbba/olapp.png",srcSet:["/modernization-playbook/static/a0d98298f4a7cd804e10faa8469f53f5/7fc1e/olapp.png 288w","/modernization-playbook/static/a0d98298f4a7cd804e10faa8469f53f5/a5df1/olapp.png 576w","/modernization-playbook/static/a0d98298f4a7cd804e10faa8469f53f5/3cbba/olapp.png 1152w","/modernization-playbook/static/a0d98298f4a7cd804e10faa8469f53f5/0b124/olapp.png 1728w","/modernization-playbook/static/a0d98298f4a7cd804e10faa8469f53f5/f1ad1/olapp.png 1903w"],sizes:"(max-width: 1152px) 100vw, 1152px",style:{width:"100%",height:"100%",margin:"0",verticalAlign:"middle",position:"absolute",top:"0",left:"0"},loading:"lazy"}),"\n    "),Object(i.b)("p",null,"If you append ",Object(i.b)("em",{parentName:"p"},"/metrics")," to the URL in your browser you will see the metrics that the application provides for Monitoring"),Object(i.b)("span",{className:"gatsby-resp-image-wrapper",style:{position:"relative",display:"block",marginLeft:"auto",marginRight:"auto",maxWidth:"1152px"}},"\n      ",Object(i.b)("span",{parentName:"span",className:"gatsby-resp-image-background-image",style:{paddingBottom:"42.01388888888889%",position:"relative",bottom:"0",left:"0",backgroundImage:"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAAAsTAAALEwEAmpwYAAAA+UlEQVQoz22S2YqFQAxE+/+/0OuKuCvuuy8ZTiDiwwhFEjtWqtK6KIokjmP5/X5CXlWVLMsi67q+0TDPs+z7LsdxyHmeim8OXBAEEoahkpFnWSZt2ypx0zRS17VGyzkbhkHGcdSBxGmaFNu2iUMZCiHzfV/yPFcyPv6SQdT3vZKgFALUkVv9PI84SFBnCtM0fdUZEei6TpVBaKTYJ1p937e4JElehajFMpOZRgMgv67rzS1+ewyqkB2aZQagsCxLKYpCI2vAPjU5ynnPO+uzy3Se5ykR6rCFDbNguzFbdtPfc2B/ge7QbpjIJJoh5cYssgKrsf7fOeD5A7SWWjsP7xjTAAAAAElFTkSuQmCC')",backgroundSize:"cover",display:"block"}}),"\n  ",Object(i.b)("img",{parentName:"span",className:"gatsby-resp-image-image",alt:"olmetrics",title:"olmetrics",src:"/modernization-playbook/static/5d90fcd8a5a03494595fb153b8f6ddf2/3cbba/olmetrics.png",srcSet:["/modernization-playbook/static/5d90fcd8a5a03494595fb153b8f6ddf2/7fc1e/olmetrics.png 288w","/modernization-playbook/static/5d90fcd8a5a03494595fb153b8f6ddf2/a5df1/olmetrics.png 576w","/modernization-playbook/static/5d90fcd8a5a03494595fb153b8f6ddf2/3cbba/olmetrics.png 1152w","/modernization-playbook/static/5d90fcd8a5a03494595fb153b8f6ddf2/0b124/olmetrics.png 1728w","/modernization-playbook/static/5d90fcd8a5a03494595fb153b8f6ddf2/b717d/olmetrics.png 1892w"],sizes:"(max-width: 1152px) 100vw, 1152px",style:{width:"100%",height:"100%",margin:"0",verticalAlign:"middle",position:"absolute",top:"0",left:"0"},loading:"lazy"}),"\n    "),Object(i.b)("h3",null,"3.4 Create a ServiceMonitor so Prometheus can find the application"),Object(i.b)("p",null,"Although the Open Liberty Operator has created a ServiceMonitor object in the dev-test namespace; Prometheus (in this implementation) requires it to be in its own namespace. So we must create it.  "),Object(i.b)("p",null,"Switch back to the ",Object(i.b)("em",{parentName:"p"},"prometheus-test")," project and go to the ",Object(i.b)("em",{parentName:"p"},"Installed Operators")," again and select the ",Object(i.b)("em",{parentName:"p"},"Prometheus Operator"),". Scroll down to find the ",Object(i.b)("em",{parentName:"p"},"Service Monitor")," section."),Object(i.b)("span",{className:"gatsby-resp-image-wrapper",style:{position:"relative",display:"block",marginLeft:"auto",marginRight:"auto",maxWidth:"1152px"}},"\n      ",Object(i.b)("span",{parentName:"span",className:"gatsby-resp-image-background-image",style:{paddingBottom:"36.11111111111111%",position:"relative",bottom:"0",left:"0",backgroundImage:"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAAAsTAAALEwEAmpwYAAABd0lEQVQoz41Q2UoDQRDcf/Ai4gEeOU1MfFAICPqgIIiiJvgbIQlJjBp/QklEnz3Qn1K8jTl23N3ZnaOc3eiibzYUPTUzXV3dWjAYwkw4gkQyhdGxcWSyWVSrVeRyOeTzeZRKZVQqFZTLCl5WfP8Ah7WaPKrVsLdXQbFYkB4KBWirGztYXllDenEJs3PzuL65hRuU4z8hXYhfXNvYymA7u4u19U0spBdxcXnlvXR0AptSMM7BOUPXYugQA5RainMwxqQQHLpp4/HDlK8dKrumAy2WSCEcS2AqFMVAYAT1xikcJXh3f492uwXLoqqvRItYeHh6ASG6uuuJumHZDO+dT7R0A0xIaJGZntjEdBh9gwEcn9R7DonpufsJWxUS5YZ/zyel9HL308RjUwehAg5XgtF40hObDEbQPzSMk3qj91GNx4X0i93uNpPKmfC4EMIXbLYJTEeAKmihaBzT4ZgveHp2DgiKt5dnGIbh7sp3429eyj/55+ziC4ptw0V6v1U5AAAAAElFTkSuQmCC')",backgroundSize:"cover",display:"block"}}),"\n  ",Object(i.b)("img",{parentName:"span",className:"gatsby-resp-image-image",alt:"createSM",title:"createSM",src:"/modernization-playbook/static/5b53d142ed9bba308b11d71192b430f9/3cbba/smcreate.png",srcSet:["/modernization-playbook/static/5b53d142ed9bba308b11d71192b430f9/7fc1e/smcreate.png 288w","/modernization-playbook/static/5b53d142ed9bba308b11d71192b430f9/a5df1/smcreate.png 576w","/modernization-playbook/static/5b53d142ed9bba308b11d71192b430f9/3cbba/smcreate.png 1152w","/modernization-playbook/static/5b53d142ed9bba308b11d71192b430f9/0b124/smcreate.png 1728w","/modernization-playbook/static/5b53d142ed9bba308b11d71192b430f9/0c3f5/smcreate.png 1856w"],sizes:"(max-width: 1152px) 100vw, 1152px",style:{width:"100%",height:"100%",margin:"0",verticalAlign:"middle",position:"absolute",top:"0",left:"0"},loading:"lazy"}),"\n    "),Object(i.b)("p",null,"Click on ",Object(i.b)("em",{parentName:"p"},"Create Instance")," and copy/paste the contents of the ",Object(i.b)("em",{parentName:"p"},"servicemonitor-test.yaml")," file into the create Screen then click on ",Object(i.b)("em",{parentName:"p"},"Create")," to generate the ServiceMonitor object"),Object(i.b)("span",{className:"gatsby-resp-image-wrapper",style:{position:"relative",display:"block",marginLeft:"auto",marginRight:"auto",maxWidth:"1152px"}},"\n      ",Object(i.b)("span",{parentName:"span",className:"gatsby-resp-image-background-image",style:{paddingBottom:"37.5%",position:"relative",bottom:"0",left:"0",backgroundImage:"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAAAsTAAALEwEAmpwYAAABq0lEQVQoz5XRz2oTURTH8SvShUkWRTOFxEnapNpQtSJFkQ6ZRgxN2qRpERVFEFciRV+i+AfNRBdVCEUXLgTfwL1SbMzC5BW6cSfajpnpjMl8vd4QCC4UL3w4v8uBC/ccMZtIMGcYJJNJEjLruk40ekSKKpqmKYP8u6cdTZJKp4NUKkU8Hg/C4bASiUR6Ymb2HCdPnyEzfYpyZYVGo0HjU5OP29s0m03a7TatVkvVPwSDKvvKZ0lcunKdYqlC9kKe23fWsDsuux2PH46Hbe9JNn85wfClK4ml5RXyhUXOnje4cfOWeuCn7+F7Hq7r0e0G/3osGCam5FfH08cZi+ksliu8/7DFRv0lL+qbbNafSU95vmEpllWlWu2zLKuvVqMmPXhcY/3hE0TmxAzHMtPE9HEuX73G+v1HjIRGOTSqEQodYOSgQIj/MDE5hT4xyeGxmFzKKq9ev2H+YpGF0ipL5RLLBYNC3mTeNDGHZLNZZZBzuRyGMdef4UKxhCmXcu/uGm+3dqi+2+Hrd5tdu4PrSG6HfdeV1cVxHHzfp9fryfl2lUDmPcfny7d9fgEoDZVPw5mB8QAAAABJRU5ErkJggg==')",backgroundSize:"cover",display:"block"}}),"\n  ",Object(i.b)("img",{parentName:"span",className:"gatsby-resp-image-image",alt:"smcontents",title:"smcontents",src:"/modernization-playbook/static/82596824207332754cb7ad2014a43db0/3cbba/smcontents.png",srcSet:["/modernization-playbook/static/82596824207332754cb7ad2014a43db0/7fc1e/smcontents.png 288w","/modernization-playbook/static/82596824207332754cb7ad2014a43db0/a5df1/smcontents.png 576w","/modernization-playbook/static/82596824207332754cb7ad2014a43db0/3cbba/smcontents.png 1152w","/modernization-playbook/static/82596824207332754cb7ad2014a43db0/0b124/smcontents.png 1728w","/modernization-playbook/static/82596824207332754cb7ad2014a43db0/41beb/smcontents.png 1877w"],sizes:"(max-width: 1152px) 100vw, 1152px",style:{width:"100%",height:"100%",margin:"0",verticalAlign:"middle",position:"absolute",top:"0",left:"0"},loading:"lazy"}),"\n    "),Object(i.b)("p",null,"You can view the installed servicemonitors from the Prometheus Operator screens or via oc commands"),Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre"},"oc project prometheus-test\n")),Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre"},"oc get servicemonitor\n")),Object(i.b)("p",null,"returns"),Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre"},"NAME   AGE\ntest   28s\n")),Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre"},"oc describe servicemonitor/test\n")),Object(i.b)("p",null,"returns the contents of our new ",Object(i.b)("em",{parentName:"p"},"test")," ServiceMonitor"),Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre"},"Name:         test\nNamespace:    prometheus-test\nLabels:       k8s-app=prometheus\n              name=test\nAnnotations:  <none>\nAPI Version:  monitoring.coreos.com/v1\nKind:         ServiceMonitor\nMetadata:\n  Creation Timestamp:  2020-04-08T00:15:06Z\n  Generation:          1\n  Resource Version:    7626170\n  Self Link:           /apis/monitoring.coreos.com/v1/namespaces/prometheus-test/servicemonitors/test\n  UID:                 59784c39-3a8d-4c9e-8e11-57a26a0487e0\nSpec:\n  Endpoints:\n    Interval:  30s\n    Bearer Token Secret:\n      Key:  \n    Port:   9080-tcp\n  Namespace Selector:\n    Match Names:\n      dev-test\n  Selector:\n    Match Labels:\n      k8s-app:  \nEvents:         <none>\n")),Object(i.b)("h2",null,"4 Use Prometheus to view the application Metrics"),Object(i.b)("p",null,"Our Prometheus instance should now be able to find our application via the ",Object(i.b)("em",{parentName:"p"},"test servicemonitor")," and it will begin to scrape the metrics every 30 seconds as we specified."),Object(i.b)("p",null,"Return to the ",Object(i.b)("em",{parentName:"p"},"Route")," section of the ",Object(i.b)("em",{parentName:"p"},"prometheus-test")," dashboard"),Object(i.b)("span",{className:"gatsby-resp-image-wrapper",style:{position:"relative",display:"block",marginLeft:"auto",marginRight:"auto",maxWidth:"1152px"}},"\n      ",Object(i.b)("span",{parentName:"span",className:"gatsby-resp-image-background-image",style:{paddingBottom:"37.5%",position:"relative",bottom:"0",left:"0",backgroundImage:"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAAAsTAAALEwEAmpwYAAABmUlEQVQoz32QzWsTURTFZ53sklpM2sl0pNo0bQ2Kmxit1f/VfREUhO4UMnFnF4JQVArFNB9N5r3MZD7fz/emTqVdeOHwzn3ce+6513pi2/R7PVzXpdVqYW9u0FhfY/3eGrV6nfpd1GrU7jdxtlzlOA6NRkNVKhVVrVYLWJ2DLu29A2znAb3nfY7ff+Tt8QnvPpww+PyJL0NPY8iwhOfhXXNlcs/z1GAwMMDA2t3vsr3ToWm7vHx1xPlEcjqGCwkKSPlvqDtcFYLu9g6bxmH/kMvpjKswZrKMuJQxIxEzFitkmCCDiCxNybKMNM1Ues3Nq/I8JwxDZT1sdwrBjZZx+JrJlU+QQK6bTASBYOEvUEppHmBETCRJjJCisCWXgjiOi3/r0e7+jeChFhzNfBYRLKOURGtOFlOmItRc8f18yumPEXMZkWZ6A+Gjy1itpMaqGGq19x7/c3j0BinE34uoWycyK337NeHr2Yifv+c6L8vUraNa3afPMC6b9hYvtEPfFzcCprZsyHR+djFjPF8y80PtMC8GljUl/gAu2u8dWqtw1gAAAABJRU5ErkJggg==')",backgroundSize:"cover",display:"block"}}),"\n  ",Object(i.b)("img",{parentName:"span",className:"gatsby-resp-image-image",alt:"promroute2",title:"promroute2",src:"/modernization-playbook/static/e20acd4209a329f4a7b48a73d753be42/3cbba/Promroute2.png",srcSet:["/modernization-playbook/static/e20acd4209a329f4a7b48a73d753be42/7fc1e/Promroute2.png 288w","/modernization-playbook/static/e20acd4209a329f4a7b48a73d753be42/a5df1/Promroute2.png 576w","/modernization-playbook/static/e20acd4209a329f4a7b48a73d753be42/3cbba/Promroute2.png 1152w","/modernization-playbook/static/e20acd4209a329f4a7b48a73d753be42/0b124/Promroute2.png 1728w","/modernization-playbook/static/e20acd4209a329f4a7b48a73d753be42/6c456/Promroute2.png 1878w"],sizes:"(max-width: 1152px) 100vw, 1152px",style:{width:"100%",height:"100%",margin:"0",verticalAlign:"middle",position:"absolute",top:"0",left:"0"},loading:"lazy"}),"\n    "),Object(i.b)("p",null," Click on the URL to return to the Prometheus console. Select the drop down in the ",Object(i.b)("em",{parentName:"p"},"-insert metric at cursor -")," box, click on any metric and then click on the ",Object(i.b)("em",{parentName:"p"},"Execute")," box. This will display that metric"),Object(i.b)("span",{className:"gatsby-resp-image-wrapper",style:{position:"relative",display:"block",marginLeft:"auto",marginRight:"auto",maxWidth:"1152px"}},"\n      ",Object(i.b)("span",{parentName:"span",className:"gatsby-resp-image-background-image",style:{paddingBottom:"44.09722222222222%",position:"relative",bottom:"0",left:"0",backgroundImage:"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAAAsTAAALEwEAmpwYAAAA+0lEQVQoz61Sy0rFMBDNt7al7Y+58Rvcu3DjWnBxd1ehmmeTJk2PMwkRFEEqDhwyJ0PmdSLmecI4jpimCfM8l5P5MAzoug5935+CkNrCWIcYN2zbhuM48BfLOUMpBXFz94inyxXBO2it4ZwrwTPgJvZ9Lw0J7Tzcun6p9Jtxgp/AJqwx8N4jhFDAPldqnP0G5jFGpJRKgtpd/vQDvRU8ppSygH0G76KdDI61Oy7ISVuSnGt3iUbWpIW4vb/g4Xmpo5wQ4fu4OyUOKUOYkIrzXyb86khZ/jq2KKzkex2fuCWulcTryxXL8gZD+7Z0r43FSkIqW9cilaFYff8BVCaePhsE/j0AAAAASUVORK5CYII=')",backgroundSize:"cover",display:"block"}}),"\n  ",Object(i.b)("img",{parentName:"span",className:"gatsby-resp-image-image",alt:"PromConsole2",title:"PromConsole2",src:"/modernization-playbook/static/7ca633187e6ed9296e9b766cac20c392/3cbba/PromConsoleMetrics.png",srcSet:["/modernization-playbook/static/7ca633187e6ed9296e9b766cac20c392/7fc1e/PromConsoleMetrics.png 288w","/modernization-playbook/static/7ca633187e6ed9296e9b766cac20c392/a5df1/PromConsoleMetrics.png 576w","/modernization-playbook/static/7ca633187e6ed9296e9b766cac20c392/3cbba/PromConsoleMetrics.png 1152w","/modernization-playbook/static/7ca633187e6ed9296e9b766cac20c392/0b124/PromConsoleMetrics.png 1728w","/modernization-playbook/static/7ca633187e6ed9296e9b766cac20c392/1d795/PromConsoleMetrics.png 1902w"],sizes:"(max-width: 1152px) 100vw, 1152px",style:{width:"100%",height:"100%",margin:"0",verticalAlign:"middle",position:"absolute",top:"0",left:"0"},loading:"lazy"}),"\n    "),Object(i.b)("p",null,"Now select the ",Object(i.b)("em",{parentName:"p"},"Status")," drop down from the header bar and click on ",Object(i.b)("em",{parentName:"p"},"Targets")),Object(i.b)("span",{className:"gatsby-resp-image-wrapper",style:{position:"relative",display:"block",marginLeft:"auto",marginRight:"auto",maxWidth:"1152px"}},"\n      ",Object(i.b)("span",{parentName:"span",className:"gatsby-resp-image-background-image",style:{paddingBottom:"27.430555555555557%",position:"relative",bottom:"0",left:"0",backgroundImage:"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAYAAABFA8wzAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAzElEQVQY063OMUsDQRCG4fvzghL2rvUf2KbRxkI0nRCLQISAihoTzouXTY7d2d3sXV4310UrwYGnGAa+bzI1OGNwekKRK4qi6OV53lNK/Vk2mrxycTdj7fiXycZPJTfTkueyQRtHtRFuH0vCLqbz/si+6+iSGGOvbdtfMmsNceeJafEpxIfA8qtGfOBlWfNR28SwWAu13qK15rOqqJJDwKHgONB5GiM01mHF47xL7elTbTi/njG8f+PqYc7l+J3FaoMTi7UWESGk8p++AUxFaQkPq1BtAAAAAElFTkSuQmCC')",backgroundSize:"cover",display:"block"}}),"\n  ",Object(i.b)("img",{parentName:"span",className:"gatsby-resp-image-image",alt:"targets",title:"targets",src:"/modernization-playbook/static/a0f5a1803e9ffd47d04526d24ad103c6/3cbba/PromTargets.png",srcSet:["/modernization-playbook/static/a0f5a1803e9ffd47d04526d24ad103c6/7fc1e/PromTargets.png 288w","/modernization-playbook/static/a0f5a1803e9ffd47d04526d24ad103c6/a5df1/PromTargets.png 576w","/modernization-playbook/static/a0f5a1803e9ffd47d04526d24ad103c6/3cbba/PromTargets.png 1152w","/modernization-playbook/static/a0f5a1803e9ffd47d04526d24ad103c6/0b124/PromTargets.png 1728w","/modernization-playbook/static/a0f5a1803e9ffd47d04526d24ad103c6/2eafe/PromTargets.png 1887w"],sizes:"(max-width: 1152px) 100vw, 1152px",style:{width:"100%",height:"100%",margin:"0",verticalAlign:"middle",position:"absolute",top:"0",left:"0"},loading:"lazy"}),"\n    "),Object(i.b)("p",null,"You can see Prometheus is monitoring our application.  "))}l.isMDXComponent=!0}}]);
//# sourceMappingURL=component---src-pages-day-2-ops-readme-mdx-8077df6b98f8118631ad.js.map